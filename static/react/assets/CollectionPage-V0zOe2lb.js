import{s as F,j as e,P as a,B as M,M as L,I as _,u as ce,L as P}from"./index-D74SW2ec.js";import{r as B,u as de}from"./react-vendor-DlgOgmxb.js";import{c as ue}from"./zustand-DBSE57v9.js";import"./supabase-Br6iVc9W.js";const me=ue((m,b)=>({binders:[],cards:[],selectedBinder:null,loading:{binders:!1,cards:!1,action:!1},errors:{binders:null,cards:null,action:null},sortOptions:{binders:"newest",cards:"newest"},setLoading:(t,s)=>m(o=>({loading:{...o.loading,[t]:s}})),setError:(t,s)=>m(o=>({errors:{...o.errors,[t]:s}})),clearErrors:()=>m({errors:{binders:null,cards:null,action:null}}),setSortOption:(t,s)=>{m(o=>({sortOptions:{...o.sortOptions,[t]:s}})),localStorage.setItem(`${t}Sort`,s)},fetchBinders:async t=>{const{setLoading:s,setError:o}=b();s("binders",!0),o("binders",null);try{const{data:l,error:d}=await F.from("binders").select("*").eq("user_id",t).order("created_at",{ascending:!1});if(d)throw d;const n=await Promise.all((l||[]).map(async u=>{const{data:p,error:x}=await F.from("cards").select("*").eq("binder_id",u.id);if(x)return console.error("[collectionStore] Error loading cards for binder",u.id,x),{...u,cards:[],stats:null};const f=(p==null?void 0:p.length)||0,w=(p||[]).reduce((y,q)=>y+(parseFloat(q.purchase_price)||0),0),N=(p||[]).reduce((y,q)=>y+(parseFloat(q.current_fmv)||0),0),c=w>0?(N-w)/w*100:0;return{...u,cards:p,stats:{totalCards:f,totalCost:w,totalFMV:N,roi:c}}})),i=b().sortOptions.binders,h=z(n,i);return m({binders:h}),console.log("[collectionStore] Loaded",h.length,"binders"),{data:h,error:null}}catch(l){return console.error("[collectionStore] Error fetching binders:",l),o("binders",l.message),{data:null,error:l}}finally{s("binders",!1)}},createBinder:async(t,s)=>{const{setLoading:o,setError:l,fetchBinders:d}=b();o("action",!0),l("action",null);try{const{data:n,error:i}=await F.from("binders").insert([{user_id:t,name:s}]).select().single();if(i)throw i;return console.log("[collectionStore] Created binder:",n),await d(t),{data:n,error:null}}catch(n){return console.error("[collectionStore] Error creating binder:",n),l("action",n.message),{data:null,error:n}}finally{o("action",!1)}},updateBinder:async(t,s,o)=>{const{setLoading:l,setError:d,fetchBinders:n}=b();l("action",!0),d("action",null);try{const{error:i}=await F.from("binders").update({name:o}).eq("id",t).eq("user_id",s);if(i)throw i;return console.log("[collectionStore] Updated binder:",t),await n(s),{error:null}}catch(i){return console.error("[collectionStore] Error updating binder:",i),d("action",i.message),{error:i}}finally{l("action",!1)}},deleteBinder:async(t,s)=>{var n;const{setLoading:o,setError:l,fetchBinders:d}=b();o("action",!0),l("action",null);try{const{error:i}=await F.from("binders").delete().eq("id",t).eq("user_id",s);if(i)throw i;return console.log("[collectionStore] Deleted binder:",t),((n=b().selectedBinder)==null?void 0:n.id)===t&&m({selectedBinder:null,cards:[]}),await d(s),{error:null}}catch(i){return console.error("[collectionStore] Error deleting binder:",i),l("action",i.message),{error:i}}finally{o("action",!1)}},selectBinder:async t=>{const{setLoading:s,setError:o,binders:l}=b();if(!t){m({selectedBinder:null,cards:[]});return}s("cards",!0),o("cards",null);try{const d=l.find(p=>p.id===t);if(!d)throw new Error("Binder not found");const{data:n,error:i}=await F.from("cards").select("*").eq("binder_id",t).order("created_at",{ascending:!1});if(i)throw i;const h=b().sortOptions.cards,u=G(n||[],h);return m({selectedBinder:d,cards:u}),console.log("[collectionStore] Selected binder:",d.name,"with",u.length,"cards"),{data:{binder:d,cards:u},error:null}}catch(d){return console.error("[collectionStore] Error selecting binder:",d),o("cards",d.message),{data:null,error:d}}finally{s("cards",!1)}},clearSelectedBinder:()=>{m({selectedBinder:null,cards:[]})},addCard:async(t,s)=>{const{setLoading:o,setError:l,selectedBinder:d,fetchBinders:n,selectBinder:i}=b();o("action",!0),l("action",null);try{if(!s.athlete)throw new Error("Athlete name is required");if(!s.binder_id)throw new Error("Please select a binder");const h={binder_id:s.binder_id,user_id:t,year:s.year||null,set_name:s.set_name||null,athlete:s.athlete,card_number:s.card_number||null,variation:s.variation||null,grading_company:s.grading_company||null,grade:s.grade||null,purchase_price:s.purchase_price||null,purchase_date:s.purchase_date||null,current_fmv:s.current_fmv||null,search_query_string:s.search_query_string||"",auto_update:s.auto_update!==!1,tags:s.tags||[]},{data:u,error:p}=await F.from("cards").insert([h]).select().single();if(p)throw p;if(console.log("[collectionStore] Added card:",u),h.current_fmv&&h.current_fmv>0){const{error:x}=await F.from("price_history").insert([{card_id:u.id,value:h.current_fmv,num_sales:null,confidence:"user_provided"}]);x&&console.error("[collectionStore] Error creating price history:",x)}return await n(t),(d==null?void 0:d.id)===s.binder_id&&await i(s.binder_id),{data:u,error:null}}catch(h){return console.error("[collectionStore] Error adding card:",h),l("action",h.message),{data:null,error:h}}finally{o("action",!1)}},updateCard:async(t,s,o)=>{const{setLoading:l,setError:d,selectedBinder:n,fetchBinders:i,selectBinder:h}=b();l("action",!0),d("action",null);try{const{data:u}=await F.from("cards").select("current_fmv").eq("id",t).single(),{error:p}=await F.from("cards").update(o).eq("id",t);if(p)throw p;console.log("[collectionStore] Updated card:",t);const x=u?parseFloat(u.current_fmv):null,f=o.current_fmv?parseFloat(o.current_fmv):null;if(f&&f>0&&x!==f){const{error:w}=await F.from("price_history").insert([{card_id:t,value:f,num_sales:null,confidence:"user_provided"}]);w&&console.error("[collectionStore] Error creating price history:",w)}return await i(s),n&&await h(n.id),{error:null}}catch(u){return console.error("[collectionStore] Error updating card:",u),d("action",u.message),{error:u}}finally{l("action",!1)}},deleteCard:async(t,s)=>{const{setLoading:o,setError:l,selectedBinder:d,fetchBinders:n,selectBinder:i}=b();o("action",!0),l("action",null);try{const{error:h}=await F.from("cards").delete().eq("id",t);if(h)throw h;return console.log("[collectionStore] Deleted card:",t),await n(s),d&&await i(d.id),{error:null}}catch(h){return console.error("[collectionStore] Error deleting card:",h),l("action",h.message),{error:h}}finally{o("action",!1)}},moveCard:async(t,s,o)=>{const{setLoading:l,setError:d,selectedBinder:n,fetchBinders:i,selectBinder:h}=b();l("action",!0),d("action",null);try{const{error:u}=await F.from("cards").update({binder_id:s}).eq("id",t);if(u)throw u;return console.log("[collectionStore] Moved card:",t,"to binder:",s),await i(o),n&&await h(n.id),{error:null}}catch(u){return console.error("[collectionStore] Error moving card:",u),d("action",u.message),{error:u}}finally{l("action",!1)}},getCard:async t=>{try{const{data:s,error:o}=await F.from("cards").select("*").eq("id",t).single();if(o)throw o;return{data:s,error:null}}catch(s){return console.error("[collectionStore] Error fetching card:",s),{data:null,error:s}}},resortBinders:()=>{const{binders:t,sortOptions:s}=b(),o=z(t,s.binders);m({binders:o})},resortCards:()=>{const{cards:t,sortOptions:s}=b(),o=G(t,s.cards);m({cards:o})}}));function z(m,b){return[...m].sort((t,s)=>{var o,l,d,n;switch(b){case"oldest":return new Date(t.created_at)-new Date(s.created_at);case"az":return t.name.localeCompare(s.name);case"za":return s.name.localeCompare(t.name);case"value_high":return(((o=s.stats)==null?void 0:o.totalFMV)||0)-(((l=t.stats)==null?void 0:l.totalFMV)||0);case"value_low":return(((d=t.stats)==null?void 0:d.totalFMV)||0)-(((n=s.stats)==null?void 0:n.totalFMV)||0);case"newest":default:return new Date(s.created_at)-new Date(t.created_at)}})}function G(m,b){return[...m].sort((t,s)=>{switch(b){case"oldest":return new Date(t.created_at)-new Date(s.created_at);case"az":return(t.athlete||"").localeCompare(s.athlete||"");case"za":return(s.athlete||"").localeCompare(t.athlete||"");case"value_high":return(parseFloat(s.current_fmv)||0)-(parseFloat(t.current_fmv)||0);case"value_low":return(parseFloat(t.current_fmv)||0)-(parseFloat(s.current_fmv)||0);case"newest":default:return new Date(s.created_at)-new Date(t.created_at)}})}function Y({binder:m,onClick:b,onEdit:t,onDelete:s}){const o=m.stats||{},l=(o.roi||0)>=0?"var(--color-success)":"var(--color-error)",d=(o.roi||0)>=0?"+":"",n=p=>{p.stopPropagation();const x=p.currentTarget.nextElementSibling;x&&x.classList.toggle("visible")},i=p=>{p.stopPropagation(),t==null||t(m)},h=p=>{p.stopPropagation(),s==null||s(m)},u=()=>{b==null||b(m)};return e.jsxs("div",{className:"binder-card",onClick:u,role:"button",tabIndex:0,onKeyDown:p=>{(p.key==="Enter"||p.key===" ")&&(p.preventDefault(),u())},"aria-label":`View ${m.name} binder`,children:[e.jsxs("div",{className:"binder-card-options",children:[e.jsxs("button",{className:"binder-options-btn",onClick:n,"aria-label":"Binder options",title:"Options",children:[e.jsx("span",{className:"dot"}),e.jsx("span",{className:"dot"}),e.jsx("span",{className:"dot"})]}),e.jsxs("div",{className:"binder-options-menu",children:[e.jsxs("button",{className:"binder-menu-item",onClick:i,children:[e.jsx("span",{children:"âœï¸"}),e.jsx("span",{children:"Edit"})]}),e.jsxs("button",{className:"binder-menu-item binder-menu-item-danger",onClick:h,children:[e.jsx("span",{children:"ðŸ—‘ï¸"}),e.jsx("span",{children:"Delete"})]})]})]}),e.jsx("h4",{className:"binder-card-title",children:m.name}),e.jsxs("div",{className:"binder-card-stats",children:[e.jsxs("div",{className:"binder-stat",children:[e.jsx("div",{className:"binder-stat-label",children:"Cards"}),e.jsx("div",{className:"binder-stat-value",children:o.totalCards||0})]}),e.jsxs("div",{className:"binder-stat",children:[e.jsx("div",{className:"binder-stat-label",children:"FMV"}),e.jsxs("div",{className:"binder-stat-value",children:["$",(o.totalFMV||0).toFixed(0)]})]}),e.jsxs("div",{className:"binder-stat",children:[e.jsx("div",{className:"binder-stat-label",children:"Cost"}),e.jsxs("div",{className:"binder-stat-value",children:["$",(o.totalCost||0).toFixed(0)]})]}),e.jsxs("div",{className:"binder-stat",children:[e.jsx("div",{className:"binder-stat-label",children:"ROI"}),e.jsxs("div",{className:"binder-stat-value",style:{color:l},children:[d,(o.roi||0).toFixed(1),"%"]})]})]}),e.jsxs("div",{className:"binder-card-footer",children:["Created ",new Date(m.created_at).toLocaleDateString()]})]})}Y.propTypes={binder:a.shape({id:a.oneOfType([a.string,a.number]).isRequired,name:a.string.isRequired,created_at:a.string.isRequired,stats:a.shape({totalCards:a.number,totalCost:a.number,totalFMV:a.number,roi:a.number})}).isRequired,onClick:a.func,onEdit:a.func,onDelete:a.func};function U({binders:m=[],onBinderClick:b,onEditBinder:t,onDeleteBinder:s,onCreateBinder:o,sortOption:l="newest",onSortChange:d,loading:n=!1}){const i=m.reduce((f,w)=>{const N=w.stats||{};return{totalCards:f.totalCards+(N.totalCards||0),totalCost:f.totalCost+(N.totalCost||0),totalFMV:f.totalFMV+(N.totalFMV||0)}},{totalCards:0,totalCost:0,totalFMV:0}),h=i.totalCost>0?(i.totalFMV-i.totalCost)/i.totalCost*100:0,u=h>=0?"var(--color-success)":"var(--color-error)",p=h>=0?"+":"",x=[{value:"newest",label:"Newest First"},{value:"oldest",label:"Oldest First"},{value:"az",label:"A-Z"},{value:"za",label:"Z-A"},{value:"value_high",label:"Highest Value"},{value:"value_low",label:"Lowest Value"}];return e.jsxs("div",{className:"binder-grid-container",children:[e.jsxs("div",{className:"collection-overview",children:[e.jsx("h2",{className:"collection-overview-title",children:"Collection Overview"}),e.jsxs("div",{className:"collection-overview-stats",children:[e.jsxs("div",{className:"collection-stat",children:[e.jsx("span",{className:"collection-stat-label",children:"Total Cards"}),e.jsx("span",{className:"collection-stat-value",children:i.totalCards})]}),e.jsxs("div",{className:"collection-stat",children:[e.jsx("span",{className:"collection-stat-label",children:"Total Cost"}),e.jsxs("span",{className:"collection-stat-value",children:["$",i.totalCost.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})]})]}),e.jsxs("div",{className:"collection-stat",children:[e.jsx("span",{className:"collection-stat-label",children:"Total FMV"}),e.jsxs("span",{className:"collection-stat-value",children:["$",i.totalFMV.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})]})]}),e.jsxs("div",{className:"collection-stat",children:[e.jsx("span",{className:"collection-stat-label",children:"Total ROI"}),e.jsxs("span",{className:"collection-stat-value",style:{color:u},children:[p,h.toFixed(1),"%"]})]})]})]}),e.jsxs("div",{className:"binder-grid-header",children:[e.jsxs("h3",{className:"binder-grid-title",children:["My Binders (",m.length,")"]}),e.jsxs("div",{className:"binder-grid-controls",children:[e.jsxs("div",{className:"sort-control",children:[e.jsx("label",{htmlFor:"binder-sort",className:"sort-label",children:"Sort:"}),e.jsx("select",{id:"binder-sort",className:"sort-select",value:l,onChange:f=>d==null?void 0:d(f.target.value),disabled:n,children:x.map(f=>e.jsx("option",{value:f.value,children:f.label},f.value))})]}),e.jsx(M,{variant:"primary",size:"sm",onClick:o,disabled:n,children:"+ New Binder"})]})]}),m.length>0?e.jsx("div",{className:"binder-grid",children:m.map(f=>e.jsx(Y,{binder:f,onClick:b,onEdit:t,onDelete:s},f.id))}):e.jsxs("div",{className:"binder-empty-state",children:[e.jsx("div",{className:"binder-empty-icon",children:"ðŸ“š"}),e.jsx("h4",{className:"binder-empty-title",children:"No Binders Yet"}),e.jsx("p",{className:"binder-empty-text",children:"Create your first binder to start organizing your collection."}),e.jsx(M,{variant:"primary",size:"md",onClick:o,disabled:n,children:"+ Create Your First Binder"})]})]})}U.propTypes={binders:a.arrayOf(a.shape({id:a.oneOfType([a.string,a.number]).isRequired,name:a.string.isRequired,created_at:a.string.isRequired,stats:a.shape({totalCards:a.number,totalCost:a.number,totalFMV:a.number,roi:a.number})})),onBinderClick:a.func,onEditBinder:a.func,onDeleteBinder:a.func,onCreateBinder:a.func,sortOption:a.string,onSortChange:a.func,loading:a.bool};function Z({cards:m=[],onEditCard:b,onDeleteCard:t,onMoveCard:s,sortOption:o="newest",onSortChange:l,loading:d=!1,allBinders:n=[],currentBinderId:i}){const[h,u]=B.useState(null),[p,x]=B.useState(null),f=[{value:"newest",label:"Newest First"},{value:"oldest",label:"Oldest First"},{value:"az",label:"A-Z (Athlete)"},{value:"za",label:"Z-A (Athlete)"},{value:"value_high",label:"Highest FMV"},{value:"value_low",label:"Lowest FMV"}],w=(r,g)=>{r.stopPropagation(),u(h===g?null:g),x(null)},N=r=>{u(null),b==null||b(r)},c=r=>{u(null),t==null||t(r)},y=r=>{x(p===r?null:r)},q=(r,g)=>{u(null),x(null),s==null||s(r,g)},C=r=>{if(!r)return!1;const g=new Date(r);return(new Date-g)/(1e3*60*60*24)>90},k=r=>{const g=[];return r.year&&g.push(r.year),r.set_name&&g.push(r.set_name),r.athlete&&g.push(r.athlete),r.card_number&&g.push(`#${r.card_number}`),r.variation&&g.push(`(${r.variation})`),g.join(" ")||"Unnamed Card"},T=r=>r.grading_company&&r.grade?`${r.grading_company} ${r.grade}`:"Raw",E=r=>{if(!r.grading_company)return"condition-badge condition-raw";const g=parseFloat(r.grade);return g>=9?"condition-badge condition-gem":g>=7?"condition-badge condition-high":"condition-badge condition-low"},V=r=>{const g=[];return r.review_required&&g.push({icon:"âš ï¸",text:r.review_reason||"Review Required",className:"status-warning"}),C(r.last_updated_at)&&g.push({icon:"ðŸ”„",text:"FMV may be outdated",className:"status-stale"}),r.auto_update&&g.push({icon:"âœ“",text:"Auto-update enabled",className:"status-auto"}),g},$=()=>{u(null),x(null)};return m.length===0?e.jsxs("div",{className:"card-list-empty",children:[e.jsx("div",{className:"card-list-empty-icon",children:"ðŸƒ"}),e.jsx("h4",{className:"card-list-empty-title",children:"No Cards Yet"}),e.jsx("p",{className:"card-list-empty-text",children:"Add your first card to this binder to start tracking its value."})]}):e.jsxs("div",{className:"card-list-container",children:[e.jsxs("div",{className:"card-list-controls",children:[e.jsxs("span",{className:"card-list-count",children:[m.length," card",m.length!==1?"s":""]}),e.jsxs("div",{className:"sort-control",children:[e.jsx("label",{htmlFor:"card-sort",className:"sort-label",children:"Sort:"}),e.jsx("select",{id:"card-sort",className:"sort-select",value:o,onChange:r=>l==null?void 0:l(r.target.value),disabled:d,children:f.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))})]})]}),e.jsx("div",{className:"card-list-table-wrapper",onClick:$,children:e.jsxs("table",{className:"card-list-table",role:"grid",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"card-col-options",children:"Options"}),e.jsx("th",{scope:"col",className:"card-col-card",children:"Card"}),e.jsx("th",{scope:"col",className:"card-col-condition",children:"Condition"}),e.jsx("th",{scope:"col",className:"card-col-cost",children:"Cost"}),e.jsx("th",{scope:"col",className:"card-col-fmv",children:"FMV"}),e.jsx("th",{scope:"col",className:"card-col-status",children:"Status"})]})}),e.jsx("tbody",{children:m.map(r=>{const g=V(r),S=n.filter(j=>j.id!==i);return e.jsxs("tr",{className:`card-row ${r.review_required?"card-row-warning":""}`,children:[e.jsx("td",{className:"card-col-options",children:e.jsxs("div",{className:"card-options-wrapper",children:[e.jsxs("button",{className:"card-options-btn",onClick:j=>w(j,r.id),"aria-label":"Card options","aria-expanded":h===r.id,"aria-haspopup":"menu",children:[e.jsx("span",{className:"dot"}),e.jsx("span",{className:"dot"}),e.jsx("span",{className:"dot"})]}),h===r.id&&e.jsxs("div",{className:"card-options-menu",role:"menu",onClick:j=>j.stopPropagation(),children:[e.jsxs("button",{className:"card-menu-item",onClick:()=>N(r),role:"menuitem",children:[e.jsx("span",{children:"âœï¸"}),e.jsx("span",{children:"Edit"})]}),S.length>0&&e.jsxs("div",{className:"card-menu-item-group",children:[e.jsxs("button",{className:"card-menu-item",onClick:()=>y(r.id),role:"menuitem","aria-expanded":p===r.id,children:[e.jsx("span",{children:"ðŸ“"}),e.jsx("span",{children:"Move to..."}),e.jsx("span",{className:"menu-arrow",children:p===r.id?"â–¾":"â–¸"})]}),p===r.id&&e.jsx("div",{className:"card-move-submenu",children:S.map(j=>e.jsx("button",{className:"card-submenu-item",onClick:()=>q(r,j.id),role:"menuitem",children:j.name},j.id))})]}),e.jsxs("button",{className:"card-menu-item card-menu-item-danger",onClick:()=>c(r),role:"menuitem",children:[e.jsx("span",{children:"ðŸ—‘ï¸"}),e.jsx("span",{children:"Delete"})]})]})]})}),e.jsx("td",{className:"card-col-card",children:e.jsxs("div",{className:"card-name-wrapper",children:[e.jsx("span",{className:"card-name",children:k(r)}),Array.isArray(r.tags)&&r.tags.length>0&&e.jsxs("div",{className:"card-tags",children:[r.tags.slice(0,3).map((j,R)=>e.jsx("span",{className:"card-tag",children:j},R)),r.tags.length>3&&e.jsxs("span",{className:"card-tag card-tag-more",children:["+",r.tags.length-3]})]})]})}),e.jsx("td",{className:"card-col-condition",children:e.jsx("span",{className:E(r),children:T(r)})}),e.jsx("td",{className:"card-col-cost",children:r.purchase_price?`$${parseFloat(r.purchase_price).toFixed(2)}`:"â€”"}),e.jsx("td",{className:"card-col-fmv",children:e.jsxs("div",{className:"card-fmv-wrapper",children:[e.jsx("span",{className:"card-fmv",children:r.current_fmv?`$${parseFloat(r.current_fmv).toFixed(2)}`:"â€”"}),r.current_fmv&&r.purchase_price&&e.jsxs("span",{className:`card-roi ${parseFloat(r.current_fmv)>=parseFloat(r.purchase_price)?"card-roi-positive":"card-roi-negative"}`,children:[parseFloat(r.current_fmv)>=parseFloat(r.purchase_price)?"+":"",((parseFloat(r.current_fmv)-parseFloat(r.purchase_price))/parseFloat(r.purchase_price)*100).toFixed(0),"%"]})]})}),e.jsx("td",{className:"card-col-status",children:e.jsx("div",{className:"card-status-wrapper",children:g.length>0?g.map((j,R)=>e.jsx("span",{className:`card-status-indicator ${j.className}`,title:j.text,children:j.icon},R)):e.jsx("span",{className:"card-status-indicator status-ok",title:"All good",children:"âœ“"})})})]},r.id)})})]})})]})}Z.propTypes={cards:a.arrayOf(a.shape({id:a.oneOfType([a.string,a.number]).isRequired,year:a.string,set_name:a.string,athlete:a.string,card_number:a.string,variation:a.string,grading_company:a.string,grade:a.string,purchase_price:a.oneOfType([a.string,a.number]),current_fmv:a.oneOfType([a.string,a.number]),auto_update:a.bool,review_required:a.bool,review_reason:a.string,last_updated_at:a.string,tags:a.oneOfType([a.arrayOf(a.string),a.string])})),onEditCard:a.func,onDeleteCard:a.func,onMoveCard:a.func,sortOption:a.string,onSortChange:a.func,loading:a.bool,allBinders:a.array,currentBinderId:a.oneOfType([a.string,a.number])};function I({binder:m,cards:b=[],onBack:t,onAddCard:s,onEditCard:o,onDeleteCard:l,onMoveCard:d,sortOption:n="newest",onSortChange:i,loading:h=!1,allBinders:u=[]}){if(!m)return null;const p=m.stats||{},x=(p.roi||0)>=0?"var(--color-success)":"var(--color-error)",f=(p.roi||0)>=0?"+":"";return e.jsxs("div",{className:"binder-detail-container",children:[e.jsxs("div",{className:"binder-detail-header",children:[e.jsxs("button",{className:"binder-back-btn",onClick:t,"aria-label":"Back to binders",children:[e.jsx("span",{"aria-hidden":"true",children:"â†"}),e.jsx("span",{children:"Back to Binders"})]}),e.jsxs("div",{className:"binder-detail-title-wrapper",children:[e.jsx("h2",{className:"binder-detail-title",children:m.name}),e.jsxs("span",{className:"binder-detail-subtitle",children:["Created ",new Date(m.created_at).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"binder-detail-stats",children:[e.jsxs("div",{className:"binder-detail-stat",children:[e.jsx("span",{className:"binder-detail-stat-label",children:"Cards"}),e.jsx("span",{className:"binder-detail-stat-value",children:p.totalCards||0})]}),e.jsxs("div",{className:"binder-detail-stat",children:[e.jsx("span",{className:"binder-detail-stat-label",children:"Total Cost"}),e.jsxs("span",{className:"binder-detail-stat-value",children:["$",(p.totalCost||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsxs("div",{className:"binder-detail-stat",children:[e.jsx("span",{className:"binder-detail-stat-label",children:"Total FMV"}),e.jsxs("span",{className:"binder-detail-stat-value",children:["$",(p.totalFMV||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsxs("div",{className:"binder-detail-stat",children:[e.jsx("span",{className:"binder-detail-stat-label",children:"ROI"}),e.jsxs("span",{className:"binder-detail-stat-value",style:{color:x},children:[f,(p.roi||0).toFixed(1),"%"]})]})]}),e.jsxs("div",{className:"binder-cards-section",children:[e.jsxs("div",{className:"binder-cards-header",children:[e.jsx("h3",{className:"binder-cards-title",children:"Cards in Binder"}),e.jsx(M,{variant:"primary",size:"sm",onClick:s,disabled:h,children:"+ Add Card"})]}),e.jsx(Z,{cards:b,onEditCard:o,onDeleteCard:l,onMoveCard:d,sortOption:n,onSortChange:i,loading:h,allBinders:u,currentBinderId:m.id})]})]})}I.propTypes={binder:a.shape({id:a.oneOfType([a.string,a.number]).isRequired,name:a.string.isRequired,created_at:a.string.isRequired,stats:a.shape({totalCards:a.number,totalCost:a.number,totalFMV:a.number,roi:a.number})}),cards:a.array,onBack:a.func,onAddCard:a.func,onEditCard:a.func,onDeleteCard:a.func,onMoveCard:a.func,sortOption:a.string,onSortChange:a.func,loading:a.bool,allBinders:a.array};function Q({isOpen:m,onClose:b,onCreate:t,loading:s=!1,error:o=null}){const[l,d]=B.useState(""),n=h=>{h.preventDefault(),l.trim()&&(t==null||t(l.trim()))},i=()=>{d(""),b==null||b()};return e.jsx(L,{isOpen:m,onClose:i,title:"Create New Binder",size:"sm",footer:e.jsxs(e.Fragment,{children:[e.jsx(M,{variant:"secondary",size:"md",onClick:i,disabled:s,children:"Cancel"}),e.jsx(M,{variant:"primary",size:"md",onClick:n,loading:s,disabled:!l.trim(),children:"Create Binder"})]}),children:e.jsxs("form",{onSubmit:n,children:[o&&e.jsxs("div",{className:"modal-error-message",role:"alert",children:[e.jsx("span",{children:"âš ï¸"}),o]}),e.jsx(_,{label:"Binder Name",placeholder:"e.g., Rookies 2024, PSA 10s, Investment Cards",value:l,onChange:h=>d(h.target.value),autoFocus:!0,required:!0,disabled:s,maxLength:100}),e.jsx("p",{className:"modal-helper-text",children:"Binders help you organize your collection. You can move cards between binders at any time."})]})})}Q.propTypes={isOpen:a.bool.isRequired,onClose:a.func.isRequired,onCreate:a.func.isRequired,loading:a.bool,error:a.string};function H({isOpen:m,onClose:b,onAdd:t,binders:s=[],defaultBinderId:o=null,loading:l=!1,error:d=null}){const n=(r=null)=>({year:"",card_number:"",set_name:"",athlete:"",variation:"",grading_company:"",grade:"",purchase_price:"",purchase_date:"",current_fmv:"",binder_id:r||"",tags:"",auto_update:!0,search_query_string:""}),[i,h]=B.useState(()=>n(o)),[u,p]=B.useState({}),[x,f]=B.useState(!1);B.useEffect(()=>{m&&(h(n(o||(s.length>0?s[0].id:""))),p({}),f(!1))},[m,o,s]);const N=(()=>{const r={};return i.year.trim()||(r.year="Year is required"),i.set_name.trim()||(r.set_name="Set name is required"),i.athlete.trim()||(r.athlete="Athlete name is required"),i.binder_id||(r.binder_id="Please select a binder"),r})(),c=Object.keys(N).length===0,y=r=>{if(!r)return null;if(/^\d{2}-\d{2}-\d{4}$/.test(r)){const[g,S,j]=r.split("-");return`${j}-${g}-${S}`}if(/^\d{2}\/\d{2}\/\d{4}$/.test(r)){const[g,S,j]=r.split("/");return`${j}-${g}-${S}`}return r},q=[{value:"",label:"Raw (Ungraded)"},{value:"PSA",label:"PSA"},{value:"BGS",label:"BGS (Beckett)"},{value:"SGC",label:"SGC"},{value:"CGC",label:"CGC"},{value:"CSG",label:"CSG"},{value:"Other",label:"Other"}],C=(r,g)=>{h(S=>({...S,[r]:g})),p(S=>({...S,[r]:!0}))},k=r=>{p(g=>({...g,[r]:!0}))},T=r=>{if(r.preventDefault(),!c){f(!0);return}const g={...i,tags:i.tags?i.tags.split(",").map(S=>S.trim()).filter(Boolean):[],purchase_price:i.purchase_price?parseFloat(i.purchase_price):null,purchase_date:y(i.purchase_date),current_fmv:i.current_fmv?parseFloat(i.current_fmv):null,search_query_string:i.search_query_string||V(i)};t==null||t(g)},E=r=>(x||u[r])&&N[r],V=r=>{const g=[];return r.year&&g.push(r.year),r.set_name&&g.push(r.set_name),r.athlete&&g.push(r.athlete),r.card_number&&g.push(`#${r.card_number}`),r.variation&&g.push(r.variation),r.grading_company&&r.grade&&g.push(`${r.grading_company} ${r.grade}`),g.join(" ")},$=()=>{h(n()),b==null||b()};return e.jsx(L,{isOpen:m,onClose:$,title:"Add Card to Collection",size:"lg",footer:e.jsxs(e.Fragment,{children:[e.jsx(M,{variant:"secondary",size:"md",onClick:$,disabled:l,children:"Cancel"}),e.jsx(M,{variant:"primary",size:"md",onClick:T,loading:l,disabled:!c,children:"Add Card"})]}),children:e.jsxs("form",{onSubmit:T,className:"add-card-form",children:[d&&e.jsxs("div",{className:"modal-error-message",role:"alert",children:[e.jsx("span",{children:"âš ï¸"}),d]}),x&&!c&&e.jsxs("div",{className:"modal-error-message",role:"alert",children:[e.jsx("span",{children:"âš ï¸"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Please fix the following:"}),e.jsx("ul",{style:{margin:"0.5rem 0 0 1rem",padding:0},children:Object.values(N).map((r,g)=>e.jsx("li",{children:r},g))})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h4",{className:"form-section-title",children:"Card Identity"}),e.jsxs("div",{className:"form-row form-row-2",children:[e.jsx(_,{label:"Year *",placeholder:"e.g., 2024",value:i.year,onChange:r=>C("year",r.target.value),onBlur:()=>k("year"),disabled:l,required:!0,error:E("year")?N.year:null}),e.jsx(_,{label:"Card Number",placeholder:"e.g., 150",value:i.card_number,onChange:r=>C("card_number",r.target.value),disabled:l})]}),e.jsx(_,{label:"Set Name *",placeholder:"e.g., Topps Chrome, Bowman 1st",value:i.set_name,onChange:r=>C("set_name",r.target.value),onBlur:()=>k("set_name"),disabled:l,required:!0,error:E("set_name")?N.set_name:null}),e.jsx(_,{label:"Athlete *",placeholder:"e.g., Shohei Ohtani",value:i.athlete,onChange:r=>C("athlete",r.target.value),onBlur:()=>k("athlete"),required:!0,disabled:l,error:E("athlete")?N.athlete:null}),e.jsx(_,{label:"Variation/Parallel",placeholder:"e.g., Refractor, Gold /50, Auto",value:i.variation,onChange:r=>C("variation",r.target.value),disabled:l})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h4",{className:"form-section-title",children:"Condition"}),e.jsxs("div",{className:"form-row form-row-2",children:[e.jsxs("div",{className:"input-wrapper",children:[e.jsx("label",{htmlFor:"grading-company",className:"input-label",children:"Grading Company"}),e.jsx("select",{id:"grading-company",className:"input-field",value:i.grading_company,onChange:r=>C("grading_company",r.target.value),disabled:l,children:q.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))})]}),e.jsx(_,{label:"Grade",placeholder:"e.g., 10, 9.5",value:i.grade,onChange:r=>C("grade",r.target.value),disabled:l||!i.grading_company})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h4",{className:"form-section-title",children:"Financial"}),e.jsxs("div",{className:"form-row form-row-3",children:[e.jsx(_,{label:"Purchase Price",type:"number",placeholder:"0.00",value:i.purchase_price,onChange:r=>C("purchase_price",r.target.value),iconLeft:e.jsx("span",{children:"$"}),disabled:l}),e.jsx(_,{label:"Purchase Date",type:"text",placeholder:"MM-DD-YYYY",value:i.purchase_date,onChange:r=>C("purchase_date",r.target.value),disabled:l}),e.jsx(_,{label:"Current FMV",type:"number",placeholder:"0.00",value:i.current_fmv,onChange:r=>C("current_fmv",r.target.value),iconLeft:e.jsx("span",{children:"$"}),disabled:l})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h4",{className:"form-section-title",children:"Organization"}),e.jsxs("div",{className:"input-wrapper",children:[e.jsx("label",{htmlFor:"binder-select",className:"input-label",children:"Binder *"}),e.jsxs("select",{id:"binder-select",className:`input-field ${E("binder_id")?"input-error":""}`,value:i.binder_id,onChange:r=>C("binder_id",r.target.value),onBlur:()=>k("binder_id"),required:!0,disabled:l,children:[e.jsx("option",{value:"",children:"Select a binder..."}),s.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]}),E("binder_id")&&e.jsx("span",{className:"input-error-message",children:N.binder_id})]}),e.jsx(_,{label:"Tags",placeholder:"e.g., rookie, investment, pc (comma-separated)",value:i.tags,onChange:r=>C("tags",r.target.value),disabled:l}),e.jsx("div",{className:"checkbox-wrapper",children:e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",checked:i.auto_update,onChange:r=>C("auto_update",r.target.checked),disabled:l}),e.jsxs("span",{className:"checkbox-text",children:["Enable automatic FMV updates",e.jsx("span",{className:"checkbox-hint",children:"(Premium feature - updates every 90 days)"})]})]})})]})]})})}H.propTypes={isOpen:a.bool.isRequired,onClose:a.func.isRequired,onAdd:a.func.isRequired,binders:a.arrayOf(a.shape({id:a.oneOfType([a.string,a.number]).isRequired,name:a.string.isRequired})),defaultBinderId:a.oneOfType([a.string,a.number]),loading:a.bool,error:a.string};function K({isOpen:m,onClose:b,onSave:t,card:s=null,binders:o=[],loading:l=!1,error:d=null}){const[n,i]=B.useState({year:"",card_number:"",set_name:"",athlete:"",variation:"",grading_company:"",grade:"",purchase_price:"",purchase_date:"",current_fmv:"",binder_id:"",tags:"",auto_update:!0,search_query_string:""});B.useEffect(()=>{s&&m&&i({year:s.year||"",card_number:s.card_number||"",set_name:s.set_name||"",athlete:s.athlete||"",variation:s.variation||"",grading_company:s.grading_company||"",grade:s.grade||"",purchase_price:s.purchase_price?String(s.purchase_price):"",purchase_date:s.purchase_date||"",current_fmv:s.current_fmv?String(s.current_fmv):"",binder_id:s.binder_id||"",tags:Array.isArray(s.tags)?s.tags.join(", "):"",auto_update:s.auto_update!==!1,search_query_string:s.search_query_string||""})},[s,m]);const h=[{value:"",label:"Raw (Ungraded)"},{value:"PSA",label:"PSA"},{value:"BGS",label:"BGS (Beckett)"},{value:"SGC",label:"SGC"},{value:"CGC",label:"CGC"},{value:"CSG",label:"CSG"},{value:"Other",label:"Other"}],u=(c,y)=>{i(q=>({...q,[c]:y}))},p=c=>{c.preventDefault();const y={year:n.year||null,card_number:n.card_number||null,set_name:n.set_name||null,athlete:n.athlete,variation:n.variation||null,grading_company:n.grading_company||null,grade:n.grade||null,purchase_price:n.purchase_price?parseFloat(n.purchase_price):null,purchase_date:n.purchase_date||null,current_fmv:n.current_fmv?parseFloat(n.current_fmv):null,binder_id:n.binder_id,tags:n.tags?n.tags.split(",").map(q=>q.trim()).filter(Boolean):[],auto_update:n.auto_update,search_query_string:n.search_query_string||x(n)};t==null||t(s.id,y)},x=c=>{const y=[];return c.year&&y.push(c.year),c.set_name&&y.push(c.set_name),c.athlete&&y.push(c.athlete),c.card_number&&y.push(`#${c.card_number}`),c.variation&&y.push(c.variation),c.grading_company&&c.grade&&y.push(`${c.grading_company} ${c.grade}`),y.join(" ")},f=()=>{b==null||b()},w=n.athlete&&n.binder_id,N=s&&[s.year,s.athlete,s.card_number?`#${s.card_number}`:""].filter(Boolean).join(" ")||"Card";return e.jsx(L,{isOpen:m,onClose:f,title:`Edit ${N}`,size:"lg",footer:e.jsxs(e.Fragment,{children:[e.jsx(M,{variant:"secondary",size:"md",onClick:f,disabled:l,children:"Cancel"}),e.jsx(M,{variant:"primary",size:"md",onClick:p,loading:l,disabled:!w,children:"Save Changes"})]}),children:e.jsxs("form",{onSubmit:p,className:"edit-card-form",children:[d&&e.jsxs("div",{className:"modal-error-message",role:"alert",children:[e.jsx("span",{children:"âš ï¸"}),d]}),(s==null?void 0:s.review_required)&&e.jsxs("div",{className:"modal-warning-message",role:"alert",children:[e.jsx("span",{children:"âš ï¸"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Review Required:"})," ",s.review_reason||"This card needs manual review."]})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h4",{className:"form-section-title",children:"Card Identity"}),e.jsxs("div",{className:"form-row form-row-2",children:[e.jsx(_,{label:"Year",placeholder:"e.g., 2024",value:n.year,onChange:c=>u("year",c.target.value),disabled:l}),e.jsx(_,{label:"Card Number",placeholder:"e.g., 150",value:n.card_number,onChange:c=>u("card_number",c.target.value),disabled:l})]}),e.jsx(_,{label:"Set Name",placeholder:"e.g., Topps Chrome, Bowman 1st",value:n.set_name,onChange:c=>u("set_name",c.target.value),disabled:l}),e.jsx(_,{label:"Athlete *",placeholder:"e.g., Shohei Ohtani",value:n.athlete,onChange:c=>u("athlete",c.target.value),required:!0,disabled:l}),e.jsx(_,{label:"Variation/Parallel",placeholder:"e.g., Refractor, Gold /50, Auto",value:n.variation,onChange:c=>u("variation",c.target.value),disabled:l})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h4",{className:"form-section-title",children:"Condition"}),e.jsxs("div",{className:"form-row form-row-2",children:[e.jsxs("div",{className:"input-wrapper",children:[e.jsx("label",{htmlFor:"edit-grading-company",className:"input-label",children:"Grading Company"}),e.jsx("select",{id:"edit-grading-company",className:"input-field",value:n.grading_company,onChange:c=>u("grading_company",c.target.value),disabled:l,children:h.map(c=>e.jsx("option",{value:c.value,children:c.label},c.value))})]}),e.jsx(_,{label:"Grade",placeholder:"e.g., 10, 9.5",value:n.grade,onChange:c=>u("grade",c.target.value),disabled:l||!n.grading_company})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h4",{className:"form-section-title",children:"Financial"}),e.jsxs("div",{className:"form-row form-row-3",children:[e.jsx(_,{label:"Purchase Price",type:"number",placeholder:"0.00",value:n.purchase_price,onChange:c=>u("purchase_price",c.target.value),iconLeft:e.jsx("span",{children:"$"}),disabled:l}),e.jsx(_,{label:"Purchase Date",type:"text",placeholder:"MM/DD/YYYY",value:n.purchase_date,onChange:c=>u("purchase_date",c.target.value),disabled:l}),e.jsx(_,{label:"Current FMV",type:"number",placeholder:"0.00",value:n.current_fmv,onChange:c=>u("current_fmv",c.target.value),iconLeft:e.jsx("span",{children:"$"}),disabled:l})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h4",{className:"form-section-title",children:"Organization"}),e.jsxs("div",{className:"input-wrapper",children:[e.jsx("label",{htmlFor:"edit-binder-select",className:"input-label",children:"Binder *"}),e.jsxs("select",{id:"edit-binder-select",className:"input-field",value:n.binder_id,onChange:c=>u("binder_id",c.target.value),required:!0,disabled:l,children:[e.jsx("option",{value:"",children:"Select a binder..."}),o.map(c=>e.jsx("option",{value:c.id,children:c.name},c.id))]})]}),e.jsx(_,{label:"Tags",placeholder:"e.g., rookie, investment, pc (comma-separated)",value:n.tags,onChange:c=>u("tags",c.target.value),disabled:l}),e.jsx("div",{className:"checkbox-wrapper",children:e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",checked:n.auto_update,onChange:c=>u("auto_update",c.target.checked),disabled:l}),e.jsxs("span",{className:"checkbox-text",children:["Enable automatic FMV updates",e.jsx("span",{className:"checkbox-hint",children:"(Premium feature - updates every 90 days)"})]})]})})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h4",{className:"form-section-title",children:"Automation Settings"}),e.jsx(_,{label:"Search Query",placeholder:"Custom search query for FMV updates",value:n.search_query_string,onChange:c=>u("search_query_string",c.target.value),disabled:l}),e.jsx("p",{className:"form-hint",children:"This query is used for automatic FMV updates. Leave blank to auto-generate from card details."})]}),s&&e.jsx("div",{className:"form-section form-section-meta",children:e.jsxs("div",{className:"card-meta-info",children:[e.jsxs("span",{children:["Added: ",new Date(s.created_at).toLocaleDateString()]}),s.last_updated_at&&e.jsxs("span",{children:["Last Updated: ",new Date(s.last_updated_at).toLocaleDateString()]})]})})]})})}K.propTypes={isOpen:a.bool.isRequired,onClose:a.func.isRequired,onSave:a.func.isRequired,card:a.shape({id:a.oneOfType([a.string,a.number]).isRequired,year:a.string,set_name:a.string,athlete:a.string,card_number:a.string,variation:a.string,grading_company:a.string,grade:a.string,purchase_price:a.oneOfType([a.string,a.number]),purchase_date:a.string,current_fmv:a.oneOfType([a.string,a.number]),binder_id:a.oneOfType([a.string,a.number]),tags:a.oneOfType([a.arrayOf(a.string),a.string]),auto_update:a.bool,search_query_string:a.string,review_required:a.bool,review_reason:a.string,created_at:a.string,last_updated_at:a.string}),binders:a.arrayOf(a.shape({id:a.oneOfType([a.string,a.number]).isRequired,name:a.string.isRequired})),loading:a.bool,error:a.string};function fe(){const{isAuthenticated:m,loading:b,user:t}=ce(),s=de(),{binders:o,cards:l,selectedBinder:d,loading:n,errors:i,sortOptions:h,fetchBinders:u,createBinder:p,updateBinder:x,deleteBinder:f,selectBinder:w,clearSelectedBinder:N,addCard:c,updateCard:y,deleteCard:q,moveCard:C,setSortOption:k,resortBinders:T,resortCards:E}=me(),[V,$]=B.useState(!1),[r,g]=B.useState(!1),[S,j]=B.useState(!1),[R,D]=B.useState(null);if(B.useEffect(()=>{!b&&!m&&s("/")},[m,b,s]),B.useEffect(()=>{m&&(t!=null&&t.id)&&u(t.id)},[m,t==null?void 0:t.id,u]),b)return e.jsx("div",{className:"page-container animate-fade-in",children:e.jsx(P,{size:"lg",text:"Loading..."})});if(!m)return null;const W=async v=>{await w(v.id)},J=v=>{const O=prompt("Enter new binder name:",v.name);O&&O.trim()&&O!==v.name&&x(v.id,t.id,O.trim())},X=async v=>{var A;confirm(`Are you sure you want to delete "${v.name}"?

This will also delete all ${((A=v.stats)==null?void 0:A.totalCards)||0} cards in this binder. This action cannot be undone.`)&&await f(v.id,t.id)},ee=async v=>{(await p(t.id,v)).error||$(!1)},re=()=>{N()},ae=async v=>{(await c(t.id,v)).error||g(!1)},se=v=>{D(v),j(!0)},te=async(v,O)=>{(await y(v,t.id,O)).error||(j(!1),D(null))},ne=async v=>{const O=[v.year,v.athlete,v.card_number?`#${v.card_number}`:""].filter(Boolean).join(" ")||"this card";confirm(`Are you sure you want to delete ${O}?`)&&await q(v.id,t.id)},ie=async(v,O)=>{await C(v.id,O,t.id)},le=v=>{k("binders",v),T()},oe=v=>{k("cards",v),E()};return e.jsxs("div",{className:"page-container animate-fade-in-up",children:[n.binders&&o.length===0?e.jsx("div",{className:"collection-loading",children:e.jsx(P,{size:"lg",text:"Loading your collection..."})}):d?e.jsx(I,{binder:d,cards:l,onBack:re,onAddCard:()=>g(!0),onEditCard:se,onDeleteCard:ne,onMoveCard:ie,sortOption:h.cards,onSortChange:oe,loading:n.cards||n.action,allBinders:o}):e.jsx(U,{binders:o,onBinderClick:W,onEditBinder:J,onDeleteBinder:X,onCreateBinder:()=>$(!0),sortOption:h.binders,onSortChange:le,loading:n.binders||n.action}),e.jsx(Q,{isOpen:V,onClose:()=>$(!1),onCreate:ee,loading:n.action,error:i.action}),e.jsx(H,{isOpen:r,onClose:()=>g(!1),onAdd:ae,binders:o,defaultBinderId:d==null?void 0:d.id,loading:n.action,error:i.action}),e.jsx(K,{isOpen:S,onClose:()=>{j(!1),D(null)},onSave:te,card:R,binders:o,loading:n.action,error:i.action})]})}export{fe as default};
//# sourceMappingURL=CollectionPage-V0zOe2lb.js.map
