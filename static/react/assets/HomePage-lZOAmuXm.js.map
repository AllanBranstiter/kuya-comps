{"version":3,"file":"HomePage-lZOAmuXm.js","sources":["../../../frontend/src/utils/searchUtils.js","../../../frontend/src/utils/marketAnalysisUtils.js","../../../frontend/src/stores/searchStore.js","../../../frontend/src/components/search/SearchForm.jsx","../../../frontend/src/components/search/SoldListingsTable.jsx","../../../frontend/src/components/search/ActiveListingsTable.jsx","../../../frontend/src/components/search/StatsGrid.jsx","../../../frontend/src/components/search/FMVDisplay.jsx","../../../frontend/src/utils/chartUtils.js","../../../frontend/src/components/charts/BeeswarmChart.jsx","../../../frontend/src/components/charts/VolumeProfileChart.jsx","../../../frontend/src/components/analysis/MarketIndicatorCard.jsx","../../../frontend/src/components/analysis/MarketPressureCard.jsx","../../../frontend/src/components/analysis/MarketConfidenceCard.jsx","../../../frontend/src/components/analysis/LiquidityScoreCard.jsx","../../../frontend/src/components/analysis/MarketAssessment.jsx","../../../frontend/src/components/analysis/PricingRecommendations.jsx","../../../frontend/src/components/analysis/AnalysisDashboard.jsx","../../../frontend/src/pages/HomePage.jsx"],"sourcesContent":["/**\n * Search utility functions for kuya-comps React frontend\n * Ported from static/script.js for the React migration\n */\n\n/**\n * Build search query with exclusions based on filter options\n * @param {string} query - Base search query\n * @param {Object} filters - { excludeLots, ungradedOnly, baseOnly }\n * @returns {string} - Query with exclusion terms appended\n */\nexport function buildSearchQuery(query, filters = {}) {\n  const { excludeLots = false, ungradedOnly = false, baseOnly = false } = filters;\n  \n  let allExcludedPhrases = [];\n\n  if (excludeLots) {\n    const lotExclusions = [\n      // Lot terms\n      '-lot', '-\"team lot\"', '-\"player lot\"', '-\"small lot\"', '-\"huge lot\"', '-\"mixed lot\"',\n      '-\"random lot\"', '-\"mystery lot\"', '-\"assorted lot\"', '-\"lot of\"', '-\"lotof\"',\n      '-bulk', '-bundle',\n      \n      // Quantity indicators (parentheses)\n      '-\"(2)\"', '-\"(3)\"', '-\"(4)\"', '-\"(5)\"', '-\"(6)\"', '-\"(7)\"', '-\"(8)\"', '-\"(9)\"',\n      '-\"(10)\"', '-\"(12)\"', '-\"(15)\"', '-\"(20)\"',\n      \n      // Card count terms\n      '-\"2 cards\"', '-\"3 cards\"', '-\"4 cards\"', '-\"5 cards\"', '-\"6 cards\"', '-\"7 cards\"',\n      '-\"8 cards\"', '-\"9 cards\"', '-\"10 cards\"',\n      '-\"2 card\"', '-\"3 card\"', '-\"4 card\"', '-\"5 card\"',\n      \n      // Multiplier terms\n      '-\"2x\"', '-\"3x\"', '-\"4x\"', '-\"5x\"', '-\"6x\"', '-\"10x\"', '-\"x cards\"', '-\"x card\"',\n      '-\"count\"', '-\"ct\"', '-\"ct.\"',\n      \n      // Multi/duplicate terms\n      '-multi', '-multiple', '-multiples', '-duplicate', '-duplicates', '-dupe', '-dupes',\n      '-\"group of\"', '-\"set of\"'\n    ];\n    allExcludedPhrases = allExcludedPhrases.concat(lotExclusions);\n  }\n\n  if (ungradedOnly) {\n    const rawOnlyExclusions = [\n      // PSA related\n      '-psa', '-\"psa 10\"', '-\"psa10\"', '-\"psa 9\"', '-\"psa9\"', '-\"psa graded\"', '-\"psa slab\"',\n      '-\"Professional Sports Authenticator\"', '-\"Professional Authenticator\"',\n      '-\"Pro Sports Authenticator\"', '-\"Certified 10\"', '-\"Certified Gem\"', '-\"Certified Mint\"',\n      '-\"Red Label\"', '-lighthouse', '-\"Gem Mint 10\"', '-\"Graded 10\"',\n      \n      // BGS related\n      '-bgs', '-\"bgs 9\"', '-\"bgs9\"', '-\"bgs 9.5\"', '-\"bgs9.5\"', '-beckett', '-\"beckett graded\"',\n      '-\"Gem 10\"', '-\"Black Label\"', '-\"Gold Label\"', '-\"Silver Label\"',\n      '-subgrades', '-\"sub grades\"', '-subs', '-\"Quad 9.5\"', '-\"quad9\"', '-\"quad 9\"',\n      '-\"True Gem\"', '-\"True Gem+\"', '-\"Gem+\"', '-bvg',\n      \n      // SGC related\n      '-sgc', '-\"sgc 10\"', '-\"sgc 9\"', '-\"sgc graded\"',\n      '-\"Tuxedo Slab\"', '-\"Black Slab\"', '-\"Green Label\"', '-\"SG LLC\"',\n      '-\"SG Grading\"', '-\"Mint+ 9.5\"', '-\"10 Pristine\"',\n      \n      // CGC/CSG related\n      '-csg', '-cgc', '-\"csg graded\"', '-\"cgc graded\"',\n      '-\"Certified Collectibles Group\"', '-\"CGC Trading Cards\"', '-\"CSG Gem\"',\n      '-\"Pristine 10\"', '-\"Perfect 10\"', '-\"Green Slab\"',\n      \n      // GMA related\n      '-gma', '-\"gma graded\"', '-\"gma 10\"',\n      \n      // HGA related\n      '-hga', '-\"hga graded\"', '-\"hybrid grading\"',\n      \n      // KSA related\n      '-ksa', '-\"ksa graded\"',\n      \n      // PCA/PGSC related\n      '-pca', '-\"pca graded\"', '-pgsc',\n      \n      // Other grading companies\n      '-fgs', '-pgi', '-pro', '-isa', '-mnt', '-\"MNT Grading\"',\n      '-rcg', '-\"TCG Grading\"', '-bccg', '-tag', '-pgs', '-tga', '-ace', '-usg',\n      '-kmgs', '-egs', '-agc', '-mgs',\n      \n      // General grading terms\n      '-slab', '-slabbed', '-encased', '-encapsulated', '-holdered',\n      '-graded', '-\"grade\"', '-authenticated', '-\"authentic\"', '-\"auto grade\"', '-verified',\n      '-gem', '-\"gem mint\"', '-\"gem10\"', '-\"gem 10\"', '-\"gem-mint\"', '-gemmint',\n      '-pristine', '-\"Mint 10\"', '-\"mint10\"', '-\"Mint 9\"', '-\"mint9\"',\n      '-\"mt 10\"', '-\"10 mt\"', '-\"Mint+\"', '-\"NM-MT\"',\n      '-\"Slabbed Card\"', '-\"Third-Party Graded\"', '-\"Certified Authentic\"', '-\"Pro Graded\"',\n      '-\"Slabbed up\"', '-\"In case\"',\n      '-\"Graded Rookie\"', '-\"Graded RC\"', '-\"Gem Rookie\"', '-\"Gem RC\"',\n      \n      // Population and authentication terms\n      '-\"population\"', '-\"pop report\"', '-\"pop 1\"', '-\"pop1\"',\n      \n      // Card storage/holder terms\n      '-\"card saver\"', '-cardsaver', '-\"semi rigid\"', '-\"semi-rigid\"',\n      '-\"one touch\"', '-\"one-touch\"', '-mag', '-\"mag case\"'\n    ];\n    allExcludedPhrases = allExcludedPhrases.concat(rawOnlyExclusions);\n  }\n\n  if (baseOnly) {\n    const baseOnlyExclusions = [\n      // Existing exclusions\n      '-refractors', '-red', '-aqua', '-blue', '-magenta', '-yellow', '-lot',\n      '-x-fractors', '-xfractors', '-helix', '-superfractor', '-x-fractor',\n      '-logofractor', '-stars', '-hyper', '-all', '-etch', '-silver', '-variation',\n      '-variations', '-refractor', '-prism', '-prizm', '-xfractor', '-gilded',\n      '-\"buy-back\"', '-buyback',\n      '-SP', '-sp', '-\"short print\"', '-\"Short Print\"', '-ssp', '-SSP',\n      '-\"super short print\"', '-\"Super Short Print\"',\n      \n      // Additional variant/parallel exclusions\n      '-foil', '-shimmer', '-lava', '-wave', '-raywave', '-speckle', '-mojo',\n      '-sapphire', '-ice', '-cracked', '-checker', '-optic', '-paper',\n      '-sepia', '-\"negative refractor\"',\n      \n      // Additional color exclusions\n      '-green', '-orange', '-gold', '-purple', '-pink', '-fuchsia', '-teal',\n      '-sky', '-lime', '-bronze', '-copper', '-black', '-white'\n    ];\n    allExcludedPhrases = allExcludedPhrases.concat(baseOnlyExclusions);\n  }\n\n  let finalQuery = query;\n  if (allExcludedPhrases.length > 0) {\n    finalQuery = `${query} ${allExcludedPhrases.join(' ')}`;\n  }\n  \n  return finalQuery;\n}\n\n/**\n * Format currency for display\n * @param {number} amount - The amount to format\n * @returns {string} - Formatted currency string\n */\nexport function formatMoney(amount) {\n  if (amount === null || amount === undefined || isNaN(amount)) {\n    return '$-.--';\n  }\n  return '$' + amount.toLocaleString('en-US', { \n    minimumFractionDigits: 2, \n    maximumFractionDigits: 2 \n  });\n}\n\n/**\n * Calculate price with fallback (for active listings)\n * Handles total_price vs extracted_price + extracted_shipping\n * @param {Object} item - Listing item from API\n * @returns {number} - Calculated price\n */\nexport function getItemPrice(item) {\n  if (!item) return 0;\n  return item.total_price ?? ((item.extracted_price || 0) + (item.extracted_shipping || 0));\n}\n\n/**\n * Filter outliers using IQR (Interquartile Range) method\n * Standard 1.5 * IQR threshold for outlier detection\n * @param {number[]} prices - Array of prices to filter\n * @returns {number[]} - Filtered array with outliers removed\n */\nexport function filterOutliers(prices) {\n  if (!prices || prices.length === 0) return [];\n  \n  if (prices.length < 4) {\n    // Need at least 4 data points for meaningful outlier detection\n    return [...prices];\n  }\n  \n  // Sort prices to find quartiles\n  const sorted = [...prices].sort((a, b) => a - b);\n  const n = sorted.length;\n  \n  // Calculate Q1, Q3, and IQR\n  const q1Index = Math.floor(n * 0.25);\n  const q3Index = Math.floor(n * 0.75);\n  const q1 = sorted[q1Index];\n  const q3 = sorted[q3Index];\n  const iqr = q3 - q1;\n  \n  // Define outlier bounds (1.5 * IQR is the standard threshold)\n  const lowerBound = q1 - 1.5 * iqr;\n  const upperBound = q3 + 1.5 * iqr;\n  \n  // Filter out outliers\n  const filtered = prices.filter(price => price >= lowerBound && price <= upperBound);\n  \n  return filtered;\n}\n\n/**\n * Escape HTML for safe display (XSS prevention)\n * @param {string} text - Text to escape\n * @returns {string} - Escaped HTML string\n */\nexport function escapeHtml(text) {\n  if (text == null) return '';\n  \n  // Use textContent/innerHTML trick for efficient escaping\n  const div = document.createElement('div');\n  div.textContent = text;\n  return div.innerHTML;\n}\n\n/**\n * Calculate standard deviation for a set of values\n * Used for market confidence calculations\n * @param {number[]} values - Array of numeric values\n * @returns {number} - Standard deviation\n */\nexport function calculateStdDev(values) {\n  if (!values || values.length === 0) return 0;\n  \n  const avg = values.reduce((sum, val) => sum + val, 0) / values.length;\n  const squareDiffs = values.map(value => Math.pow(value - avg, 2));\n  const avgSquareDiff = squareDiffs.reduce((sum, val) => sum + val, 0) / values.length;\n  \n  return Math.sqrt(avgSquareDiff);\n}\n\n/**\n * Calculate market confidence based on price consistency\n * Higher score = more consistent prices = more reliable FMV\n * @param {number[]} prices - Array of sale prices\n * @returns {number} - Confidence score 0-100\n */\nexport function calculateMarketConfidence(prices) {\n  if (!prices || prices.length === 0) return 0;\n  \n  const avg = prices.reduce((sum, p) => sum + p, 0) / prices.length;\n  const stdDev = calculateStdDev(prices);\n  \n  // Coefficient of Variation as percentage\n  const coefficientOfVariation = (stdDev / avg) * 100;\n  \n  // Scale: CoV=0% ‚Üí confidence=100, CoV=100% ‚Üí confidence=50, CoV=200% ‚Üí confidence=33\n  const confidence = Math.round(100 / (1 + coefficientOfVariation / 100));\n  \n  return Math.min(100, Math.max(0, confidence));\n}\n\n/**\n * Calculate weighted median based on price clustering\n * Prices that appear more frequently get higher weight\n * @param {number[]} prices - Array of prices\n * @returns {number|null} - Weighted median price\n */\nexport function calculateWeightedMedian(prices) {\n  if (!prices || prices.length === 0) return null;\n  if (prices.length === 1) return prices[0];\n  \n  // Group prices by value and count occurrences\n  const priceCounts = {};\n  prices.forEach(price => {\n    // Round to nearest cent to group similar prices\n    const roundedPrice = Math.round(price * 100) / 100;\n    priceCounts[roundedPrice] = (priceCounts[roundedPrice] || 0) + 1;\n  });\n  \n  // Sort unique prices\n  const uniquePrices = Object.keys(priceCounts)\n    .map(p => parseFloat(p))\n    .sort((a, b) => a - b);\n  \n  // Calculate total count\n  const totalCount = prices.length;\n  const targetCount = totalCount / 2;\n  \n  // Find weighted median\n  let cumulativeCount = 0;\n  for (const price of uniquePrices) {\n    cumulativeCount += priceCounts[price];\n    if (cumulativeCount >= targetCount) {\n      return price;\n    }\n  }\n  \n  // Fallback to last price\n  return uniquePrices[uniquePrices.length - 1];\n}\n\n/**\n * Format a price to .99 style list price\n * Useful for pricing recommendations\n * @param {number} value - The price to convert\n * @returns {number|null} - Price ending in .99\n */\nexport function toNinetyNine(value) {\n  if (value == null || isNaN(value)) return null;\n  const ceil = Math.ceil(value);\n  const base = Math.max(ceil, 1);\n  return base - 0.01;\n}\n\n/**\n * Calculate data quality score based on sample sizes\n * @param {number} soldCount - Number of sold items\n * @param {number} activeCount - Number of active listings\n * @param {number} confidence - Market confidence score\n * @returns {number} - Data quality score 0-100\n */\nexport function calculateDataQuality(soldCount, activeCount, confidence) {\n  // Sample size component (60% weight)\n  let sampleScore = 0;\n  if (soldCount >= 20 && activeCount >= 10) {\n    sampleScore = 100;\n  } else if (soldCount >= 10 && activeCount >= 5) {\n    sampleScore = 70;\n  } else if (soldCount >= 5 && activeCount >= 3) {\n    sampleScore = 40;\n  } else {\n    sampleScore = 20;\n  }\n  \n  // Confidence component (40% weight)\n  const confidenceScore = confidence || 0;\n  \n  // Weighted average\n  return Math.round(sampleScore * 0.6 + confidenceScore * 0.4);\n}\n\n/**\n * Debounce helper function to prevent rapid-fire function calls\n * @param {Function} func - Function to debounce\n * @param {number} wait - Milliseconds to wait before executing\n * @returns {Function} - Debounced function\n */\nexport function debounce(func, wait) {\n  let timeout;\n  return function executedFunction(...args) {\n    const later = () => {\n      clearTimeout(timeout);\n      func.apply(this, args);\n    };\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n  };\n}\n\n/**\n * Check if running on a mobile device\n * @returns {boolean}\n */\nexport function isMobileDevice() {\n  return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n}\n\n/**\n * Check if running on iOS device\n * @returns {boolean}\n */\nexport function isIOSDevice() {\n  return /iPhone|iPad|iPod/i.test(navigator.userAgent);\n}\n","/**\n * Market Analysis Utilities for kuya-comps React frontend\n * Functions for calculating market metrics and getting display information\n */\n\nimport { filterOutliers, calculateStdDev, getItemPrice } from './searchUtils';\n\n/**\n * Calculate market pressure from active listings vs FMV\n * Shows how much sellers are asking above/below fair market value\n * \n * Formula: ((medianAskingPrice - FMV) / FMV) * 100\n * \n * @param {Array} activeListings - Array of active listing objects\n * @param {number} fmv - Fair market value\n * @returns {Object} - { value: number, medianAsking: number }\n */\nexport function calculateMarketPressure(activeListings, fmv) {\n  if (!activeListings || activeListings.length === 0 || !fmv || fmv <= 0) {\n    return { value: null, medianAsking: null };\n  }\n\n  // Extract prices from active listings (Buy It Now only)\n  const prices = activeListings\n    .filter(item => {\n      const buyingFormat = (item.buying_format || '').toLowerCase();\n      return buyingFormat.includes('buy it now');\n    })\n    .map(item => getItemPrice(item))\n    .filter(price => price > 0);\n\n  if (prices.length === 0) {\n    return { value: null, medianAsking: null };\n  }\n\n  // Filter outliers for more accurate median\n  const filteredPrices = filterOutliers(prices);\n  const pricesToUse = filteredPrices.length > 0 ? filteredPrices : prices;\n\n  // Calculate median asking price\n  const sorted = [...pricesToUse].sort((a, b) => a - b);\n  const mid = Math.floor(sorted.length / 2);\n  const medianAsking = sorted.length % 2 !== 0\n    ? sorted[mid]\n    : (sorted[mid - 1] + sorted[mid]) / 2;\n\n  // Calculate pressure: how much above FMV are sellers asking?\n  const pressure = ((medianAsking - fmv) / fmv) * 100;\n\n  return {\n    value: Math.round(pressure * 10) / 10,  // Round to 1 decimal\n    medianAsking: Math.round(medianAsking * 100) / 100\n  };\n}\n\n/**\n * Calculate market confidence from price variance in sold listings\n * Higher score = more consistent prices = more reliable FMV\n * \n * Formula: 100 / (1 + coefficientOfVariation / 100)\n * \n * @param {Array} soldListings - Array of sold listing objects\n * @returns {Object} - { value: number, stdDev: number, mean: number }\n */\nexport function calculateMarketConfidence(soldListings) {\n  if (!soldListings || soldListings.length === 0) {\n    return { value: null, stdDev: null, mean: null };\n  }\n\n  // Extract prices from sold listings\n  const prices = soldListings\n    .map(item => getItemPrice(item))\n    .filter(price => price > 0);\n\n  if (prices.length < 2) {\n    return { value: 100, stdDev: 0, mean: prices[0] || 0 };  // Single price = perfect confidence\n  }\n\n  // Filter outliers\n  const filteredPrices = filterOutliers(prices);\n  const pricesToUse = filteredPrices.length >= 2 ? filteredPrices : prices;\n\n  // Calculate mean and standard deviation\n  const mean = pricesToUse.reduce((sum, p) => sum + p, 0) / pricesToUse.length;\n  const stdDev = calculateStdDev(pricesToUse);\n\n  // Coefficient of Variation as percentage\n  const coefficientOfVariation = mean > 0 ? (stdDev / mean) * 100 : 0;\n\n  // Scale: CoV=0% ‚Üí confidence=100, CoV=100% ‚Üí confidence=50\n  const confidence = Math.round(100 / (1 + coefficientOfVariation / 100));\n\n  return {\n    value: Math.min(100, Math.max(0, confidence)),\n    stdDev: Math.round(stdDev * 100) / 100,\n    mean: Math.round(mean * 100) / 100\n  };\n}\n\n/**\n * Calculate liquidity score from sold/active ratio (absorption rate)\n * Shows how quickly cards are selling relative to supply\n * \n * Formula: Absorption ratio = completedSales / activeListings\n * \n * @param {number} soldCount - Number of recent sold listings\n * @param {number} activeCount - Number of active listings\n * @returns {Object} - { value: number, ratio: number, band: string }\n */\nexport function calculateLiquidityScore(soldCount, activeCount) {\n  if (soldCount === null || soldCount === undefined || \n      activeCount === null || activeCount === undefined) {\n    return { value: null, ratio: null, band: 'unknown' };\n  }\n\n  // Handle edge cases\n  if (activeCount === 0 && soldCount === 0) {\n    return { value: 50, ratio: 0, band: 'unknown' };  // No data\n  }\n\n  if (activeCount === 0) {\n    return { value: 100, ratio: Infinity, band: 'high' };  // All sold, nothing active\n  }\n\n  // Calculate absorption ratio\n  const ratio = soldCount / activeCount;\n\n  // Convert ratio to 0-100 score using logarithmic scale\n  // Ratio 1.0 = score 75, Ratio 0.5 = score 50, Ratio 2.0 = score 90\n  let score;\n  if (ratio >= 1.0) {\n    // High liquidity: scale 75-100\n    score = Math.min(100, 75 + (Math.log10(ratio + 1) * 25));\n  } else if (ratio >= 0.5) {\n    // Moderate liquidity: scale 50-75\n    score = 50 + ((ratio - 0.5) * 50);\n  } else if (ratio >= 0.2) {\n    // Low liquidity: scale 25-50\n    score = 25 + ((ratio - 0.2) / 0.3 * 25);\n  } else {\n    // Very low liquidity: scale 0-25\n    score = (ratio / 0.2) * 25;\n  }\n\n  // Determine band\n  let band;\n  if (ratio >= 1.0) {\n    band = 'high';\n  } else if (ratio >= 0.5) {\n    band = 'moderate';\n  } else if (ratio >= 0.2) {\n    band = 'low';\n  } else {\n    band = 'very-low';\n  }\n\n  return {\n    value: Math.round(score),\n    ratio: Math.round(ratio * 100) / 100,\n    band\n  };\n}\n\n/**\n * Get display information for a metric value (color, label, description)\n * \n * @param {'pressure' | 'confidence' | 'liquidity'} metricType - Type of metric\n * @param {number} value - The metric value\n * @returns {Object} - { color, bgColor, label, description, icon }\n */\nexport function getMetricBand(metricType, value) {\n  if (value === null || value === undefined) {\n    return {\n      color: 'var(--subtle-text-color)',\n      bgColor: 'var(--background-color)',\n      label: 'N/A',\n      description: 'Insufficient data',\n      icon: '‚ùì'\n    };\n  }\n\n  switch (metricType) {\n    case 'pressure':\n      return getMarketPressureBand(value);\n    case 'confidence':\n      return getMarketConfidenceBand(value);\n    case 'liquidity':\n      return getLiquidityBand(value);\n    default:\n      return {\n        color: 'var(--subtle-text-color)',\n        bgColor: 'var(--background-color)',\n        label: 'Unknown',\n        description: 'Unknown metric type',\n        icon: '‚ùì'\n      };\n  }\n}\n\n/**\n * Get band info for market pressure value\n * Bands: Below FMV (negative), Healthy (0-15%), Optimistic (15-30%), \n *        Resistance (30-50%), Unrealistic (50%+)\n */\nfunction getMarketPressureBand(value) {\n  if (value < 0) {\n    return {\n      color: '#28a745',\n      bgColor: 'rgba(40, 167, 69, 0.1)',\n      label: 'Below FMV',\n      description: 'Sellers asking below market value - potential deals available',\n      icon: 'üí∞'\n    };\n  } else if (value <= 15) {\n    return {\n      color: '#28a745',\n      bgColor: 'rgba(40, 167, 69, 0.1)',\n      label: 'Healthy',\n      description: 'Asking prices align well with recent sales',\n      icon: '‚úÖ'\n    };\n  } else if (value <= 30) {\n    return {\n      color: '#ffc107',\n      bgColor: 'rgba(255, 193, 7, 0.1)',\n      label: 'Optimistic',\n      description: 'Sellers slightly optimistic - room for negotiation',\n      icon: 'üí¨'\n    };\n  } else if (value <= 50) {\n    return {\n      color: '#fd7e14',\n      bgColor: 'rgba(253, 126, 20, 0.1)',\n      label: 'Resistance',\n      description: 'Significant gap between asking and sold prices',\n      icon: '‚ö†Ô∏è'\n    };\n  } else {\n    return {\n      color: '#dc3545',\n      bgColor: 'rgba(220, 53, 69, 0.1)',\n      label: 'Unrealistic',\n      description: 'Sellers asking well above what market will bear',\n      icon: 'üö´'\n    };\n  }\n}\n\n/**\n * Get band info for market confidence value\n * Based on price consistency (coefficient of variation)\n */\nfunction getMarketConfidenceBand(value) {\n  if (value >= 80) {\n    return {\n      color: '#28a745',\n      bgColor: 'rgba(40, 167, 69, 0.1)',\n      label: 'High',\n      description: 'Very consistent pricing - FMV is reliable',\n      icon: 'üéØ'\n    };\n  } else if (value >= 60) {\n    return {\n      color: '#28a745',\n      bgColor: 'rgba(40, 167, 69, 0.1)',\n      label: 'Good',\n      description: 'Reasonably consistent pricing',\n      icon: '‚úÖ'\n    };\n  } else if (value >= 40) {\n    return {\n      color: '#ffc107',\n      bgColor: 'rgba(255, 193, 7, 0.1)',\n      label: 'Moderate',\n      description: 'Some price variance - FMV is estimate',\n      icon: 'üìä'\n    };\n  } else if (value >= 20) {\n    return {\n      color: '#fd7e14',\n      bgColor: 'rgba(253, 126, 20, 0.1)',\n      label: 'Low',\n      description: 'High price variance - use FMV with caution',\n      icon: '‚ö†Ô∏è'\n    };\n  } else {\n    return {\n      color: '#dc3545',\n      bgColor: 'rgba(220, 53, 69, 0.1)',\n      label: 'Very Low',\n      description: 'Prices vary widely - FMV unreliable',\n      icon: '‚ùó'\n    };\n  }\n}\n\n/**\n * Get band info for liquidity score\n * Based on absorption ratio (sold/active)\n */\nfunction getLiquidityBand(value) {\n  if (value >= 75) {\n    return {\n      color: '#28a745',\n      bgColor: 'rgba(40, 167, 69, 0.1)',\n      label: 'High',\n      description: 'Cards selling faster than being listed',\n      icon: 'üî•'\n    };\n  } else if (value >= 50) {\n    return {\n      color: '#28a745',\n      bgColor: 'rgba(40, 167, 69, 0.1)',\n      label: 'Moderate',\n      description: 'Balanced market activity',\n      icon: '‚öñÔ∏è'\n    };\n  } else if (value >= 25) {\n    return {\n      color: '#ffc107',\n      bgColor: 'rgba(255, 193, 7, 0.1)',\n      label: 'Low',\n      description: 'More supply than demand',\n      icon: 'üìâ'\n    };\n  } else {\n    return {\n      color: '#dc3545',\n      bgColor: 'rgba(220, 53, 69, 0.1)',\n      label: 'Very Low',\n      description: 'Oversupplied market - slow sales expected',\n      icon: 'üê¢'\n    };\n  }\n}\n\n/**\n * Calculate pricing recommendations based on market conditions\n * \n * @param {number} fmv - Fair market value\n * @param {Object} pressure - Market pressure object\n * @param {Object} liquidity - Liquidity object\n * @returns {Object} - { quickSale, target, patientSale, rangeMin, rangeMax }\n */\nexport function getPricingRecommendations(fmv, pressure, liquidity) {\n  if (!fmv || fmv <= 0) {\n    return null;\n  }\n\n  // Base adjustments\n  let quickDiscount = 0.15;  // 15% below FMV\n  let patientPremium = 0.15; // 15% above FMV\n\n  // Adjust based on market pressure\n  if (pressure?.value !== null) {\n    if (pressure.value < 0) {\n      // Below FMV market - can price more aggressively\n      quickDiscount = 0.10;\n      patientPremium = 0.05;\n    } else if (pressure.value > 30) {\n      // High pressure market - need to be more competitive\n      quickDiscount = 0.20;\n      patientPremium = 0.10;\n    }\n  }\n\n  // Adjust based on liquidity\n  if (liquidity?.value !== null) {\n    if (liquidity.value >= 75) {\n      // High liquidity - can price higher\n      quickDiscount = Math.max(quickDiscount - 0.05, 0.05);\n      patientPremium = Math.min(patientPremium + 0.05, 0.25);\n    } else if (liquidity.value < 25) {\n      // Low liquidity - need competitive pricing\n      quickDiscount = Math.min(quickDiscount + 0.05, 0.30);\n      patientPremium = Math.max(patientPremium - 0.05, 0.05);\n    }\n  }\n\n  // Calculate prices\n  const quickSale = fmv * (1 - quickDiscount);\n  const patientSale = fmv * (1 + patientPremium);\n\n  // Format to .99 style prices for better marketability\n  const formatToNinetyNine = (value) => {\n    const ceil = Math.ceil(value);\n    return Math.max(ceil, 1) - 0.01;\n  };\n\n  return {\n    quickSale: formatToNinetyNine(quickSale),\n    target: Math.round(fmv * 100) / 100,\n    patientSale: formatToNinetyNine(patientSale),\n    rangeMin: Math.round(quickSale * 100) / 100,\n    rangeMax: Math.round(patientSale * 100) / 100,\n    quickDiscount: Math.round(quickDiscount * 100),\n    patientPremium: Math.round(patientPremium * 100)\n  };\n}\n\n/**\n * Determine market tier based on metrics\n * Used for market assessment messaging\n * \n * @param {Object} metrics - { pressure, confidence, liquidity }\n * @returns {Object} - { tier, label, color, icon }\n */\nexport function determineMarketTier(metrics) {\n  const { pressure, confidence, liquidity } = metrics;\n\n  // Score each metric\n  let score = 0;\n\n  // Pressure score (negative/low is good for buyers)\n  if (pressure?.value !== null) {\n    if (pressure.value < 0) score += 3;\n    else if (pressure.value <= 15) score += 2;\n    else if (pressure.value <= 30) score += 1;\n    // Higher pressure = 0 points\n  }\n\n  // Confidence score (higher is better)\n  if (confidence?.value !== null) {\n    if (confidence.value >= 70) score += 3;\n    else if (confidence.value >= 50) score += 2;\n    else if (confidence.value >= 30) score += 1;\n  }\n\n  // Liquidity score (higher is better)\n  if (liquidity?.value !== null) {\n    if (liquidity.value >= 75) score += 3;\n    else if (liquidity.value >= 50) score += 2;\n    else if (liquidity.value >= 25) score += 1;\n  }\n\n  // Determine tier based on total score\n  if (score >= 7) {\n    return {\n      tier: 1,\n      label: 'Excellent',\n      color: '#28a745',\n      bgColor: 'rgba(40, 167, 69, 0.1)',\n      icon: 'üåü',\n      description: 'Great market conditions for both buyers and sellers'\n    };\n  } else if (score >= 5) {\n    return {\n      tier: 2,\n      label: 'Good',\n      color: '#28a745',\n      bgColor: 'rgba(40, 167, 69, 0.1)',\n      icon: '‚úÖ',\n      description: 'Favorable market conditions'\n    };\n  } else if (score >= 3) {\n    return {\n      tier: 3,\n      label: 'Fair',\n      color: '#ffc107',\n      bgColor: 'rgba(255, 193, 7, 0.1)',\n      icon: '‚öñÔ∏è',\n      description: 'Mixed market signals - proceed with analysis'\n    };\n  } else if (score >= 1) {\n    return {\n      tier: 4,\n      label: 'Challenging',\n      color: '#fd7e14',\n      bgColor: 'rgba(253, 126, 20, 0.1)',\n      icon: '‚ö†Ô∏è',\n      description: 'Difficult market conditions - be cautious'\n    };\n  } else {\n    return {\n      tier: 5,\n      label: 'Poor',\n      color: '#dc3545',\n      bgColor: 'rgba(220, 53, 69, 0.1)',\n      icon: '‚õî',\n      description: 'Unfavorable market conditions'\n    };\n  }\n}\n\n/**\n * Generate persona-specific advice based on market conditions\n * \n * @param {Object} tier - Market tier object\n * @param {Object} metrics - { pressure, confidence, liquidity }\n * @returns {Object} - { collector, seller, flipper }\n */\nexport function generatePersonaAdvice(tier, metrics) {\n  const { pressure, confidence, liquidity } = metrics;\n\n  // Default advice\n  const advice = {\n    collector: '',\n    seller: '',\n    flipper: ''\n  };\n\n  // Collector advice - focused on fair buying\n  if (pressure?.value !== null) {\n    if (pressure.value < 0) {\n      advice.collector = 'Good time to add to your collection - sellers are pricing competitively.';\n    } else if (pressure.value <= 15) {\n      advice.collector = 'Fair pricing available. Look for listings near FMV.';\n    } else if (pressure.value <= 30) {\n      advice.collector = 'Many listings overpriced. Make offers below asking price.';\n    } else {\n      advice.collector = 'Sellers asking too much. Wait for better deals or make low offers.';\n    }\n  } else {\n    advice.collector = 'Review individual listings to find fair deals.';\n  }\n\n  // Seller advice - focused on realistic pricing\n  if (liquidity?.value !== null && pressure?.value !== null) {\n    if (liquidity.value >= 75) {\n      if (pressure.value <= 15) {\n        advice.seller = 'Strong demand! Price at FMV for quick sales, slightly above for max value.';\n      } else {\n        advice.seller = 'Despite high demand, price competitively - market is saturated with high asks.';\n      }\n    } else if (liquidity.value >= 50) {\n      advice.seller = 'Moderate demand. Price at or slightly below FMV for best results.';\n    } else {\n      advice.seller = 'Slow market. Price 10-15% below FMV for realistic sale timeframe.';\n    }\n  } else {\n    advice.seller = 'Price near FMV and monitor market response.';\n  }\n\n  // Flipper advice - focused on profit potential\n  if (confidence?.value !== null && pressure?.value !== null) {\n    if (pressure.value < 0 && confidence.value >= 60) {\n      advice.flipper = 'Potential flip opportunity! Underpriced listings available with reliable FMV.';\n    } else if (confidence.value < 40) {\n      advice.flipper = 'Risky flip - wide price variance makes profit estimation difficult.';\n    } else if (pressure.value > 30) {\n      advice.flipper = 'Limited flip potential - asking prices already above what buyers will pay.';\n    } else if (liquidity?.value !== null && liquidity.value < 25) {\n      advice.flipper = 'Slow turnover - capital may be tied up for extended period.';\n    } else {\n      advice.flipper = 'Modest flip potential. Focus on listings 15%+ below FMV.';\n    }\n  } else {\n    advice.flipper = 'Gather more market data before committing capital.';\n  }\n\n  return advice;\n}\n","import { create } from 'zustand';\nimport { buildSearchQuery, getItemPrice } from '../utils/searchUtils';\nimport { supabase } from '../utils/supabase';\nimport {\n  calculateMarketPressure,\n  calculateMarketConfidence,\n  calculateLiquidityScore,\n  determineMarketTier,\n  generatePersonaAdvice,\n  getPricingRecommendations\n} from '../utils/marketAnalysisUtils';\n\n/**\n * Search Store - Zustand store for managing card search functionality\n * \n * Handles:\n * - Search query and filters\n * - Sold listings (comps)\n * - Active listings\n * - FMV calculations\n * - Loading and error states\n */\n\n/**\n * Helper to get auth headers for authenticated users\n * Uses Supabase session token if available\n * @returns {Promise<Object>} - Headers object with Authorization if logged in\n */\nconst getAuthHeaders = async () => {\n  try {\n    const { data: { session } } = await supabase.auth.getSession();\n    if (session?.access_token) {\n      return { 'Authorization': `Bearer ${session.access_token}` };\n    }\n  } catch (e) {\n    console.warn('[searchStore] Failed to get auth session:', e);\n  }\n  return {};\n};\n\nconst useSearchStore = create((set, get) => ({\n  // ============================================================================\n  // STATE\n  // ============================================================================\n  \n  // Query state\n  query: '',\n  filters: {\n    excludeLots: false,\n    ungradedOnly: false,\n    baseOnly: false\n  },\n  \n  // Results state\n  soldListings: [],\n  activeListings: [],\n  \n  // Statistics from sold listings\n  stats: null,  // { min_price, max_price, avg_price, count }\n  \n  // Fair Market Value data\n  fmv: null,    // { market_value, quick_sale, patient_sale, expected_low, expected_high, count }\n  \n  // Loading states\n  loading: false,\n  loadingComps: false,\n  loadingActive: false,\n  loadingFmv: false,\n  loadingMarketAnalysis: false,\n  \n  // Error state\n  error: null,\n  \n  // UI state\n  showAllActive: false,  // Toggle for \"See All\" active listings (vs only below FMV)\n  \n  // Market Analysis state\n  marketMetrics: null,   // { pressure, confidence, liquidity }\n  marketTier: null,      // { tier, label, color, icon, description }\n  marketAdvice: null,    // { collector, seller, flipper }\n  pricingRecommendations: null,  // { quickSale, target, patientSale, rangeMin, rangeMax }\n  marketMessage: null,   // API response from /market-message endpoint\n  \n  // ============================================================================\n  // SIMPLE SETTERS\n  // ============================================================================\n  \n  /**\n   * Set the search query\n   */\n  setQuery: (query) => set({ query }),\n  \n  /**\n   * Update filter options (merges with existing)\n   */\n  setFilters: (filters) => set((state) => ({ \n    filters: { ...state.filters, ...filters } \n  })),\n  \n  /**\n   * Toggle a specific filter\n   */\n  toggleFilter: (filterName) => set((state) => ({\n    filters: { ...state.filters, [filterName]: !state.filters[filterName] }\n  })),\n  \n  /**\n   * Set showAllActive toggle\n   */\n  setShowAllActive: (show) => set({ showAllActive: show }),\n  \n  /**\n   * Toggle showAllActive\n   */\n  toggleShowAllActive: () => set((state) => ({ showAllActive: !state.showAllActive })),\n  \n  // ============================================================================\n  // MAIN SEARCH ACTION\n  // ============================================================================\n  \n  /**\n   * Execute search - fetches sold listings, calculates FMV, then fetches active listings\n   * This mirrors the flow from the original script.js runSearchInternal()\n   */\n  search: async () => {\n    const { query, filters } = get();\n    \n    // Validate query\n    if (!query.trim()) {\n      set({ error: 'Please enter a search query' });\n      return;\n    }\n    \n    // Reset state for new search\n    set({\n      loading: true,\n      error: null,\n      soldListings: [],\n      activeListings: [],\n      stats: null,\n      fmv: null,\n      showAllActive: false,\n      marketMetrics: null,\n      marketTier: null,\n      marketAdvice: null,\n      pricingRecommendations: null,\n      marketMessage: null\n    });\n    \n    // Build full query with exclusion terms\n    const fullQuery = buildSearchQuery(query, filters);\n    \n    try {\n      // Get auth headers for authenticated requests\n      const authHeaders = await getAuthHeaders();\n      \n      // ========================================\n      // STEP 1: Fetch sold listings (comps)\n      // ========================================\n      set({ loadingComps: true });\n      console.log('[searchStore] Fetching sold listings...');\n      \n      const compsParams = new URLSearchParams({\n        query: fullQuery,\n        pages: '1',\n        delay: '2',\n        ungraded_only: String(filters.ungradedOnly)\n      });\n      \n      const compsResponse = await fetch(`/comps?${compsParams}`, {\n        headers: authHeaders\n      });\n      \n      if (!compsResponse.ok) {\n        const errorText = await compsResponse.text();\n        \n        // Handle specific error codes\n        if (compsResponse.status === 429) {\n          try {\n            const errorJson = JSON.parse(errorText);\n            if (errorJson.error?.code === 'SEARCH_LIMIT_EXCEEDED') {\n              throw new Error(`Search limit exceeded. Upgrade your plan for more searches.`);\n            }\n          } catch (e) {\n            if (e.message.includes('Search limit')) throw e;\n          }\n          throw new Error('Rate limit exceeded. Please try again later.');\n        }\n        \n        if (compsResponse.status === 422) {\n          try {\n            const errorJson = JSON.parse(errorText);\n            if (errorJson.detail?.[0]?.type === 'string_too_long') {\n              throw new Error('Search query is too long. Try using fewer filters or a shorter search term.');\n            }\n          } catch (e) {\n            if (e.message.includes('too long')) throw e;\n          }\n        }\n        \n        throw new Error(`Failed to fetch sold listings: ${compsResponse.status}`);\n      }\n      \n      const compsData = await compsResponse.json();\n      \n      set({ \n        soldListings: compsData.items || [],\n        stats: {\n          min_price: compsData.min_price,\n          max_price: compsData.max_price,\n          avg_price: compsData.avg_price,\n          count: compsData.items?.length || 0\n        },\n        loadingComps: false\n      });\n      \n      console.log('[searchStore] Fetched', compsData.items?.length || 0, 'sold listings');\n      \n      // ========================================\n      // STEP 2: Calculate FMV\n      // ========================================\n      set({ loadingFmv: true });\n      console.log('[searchStore] Calculating FMV...');\n      \n      const fmvResponse = await fetch('/fmv', {\n        method: 'POST',\n        headers: { \n          'Content-Type': 'application/json',\n          ...authHeaders\n        },\n        body: JSON.stringify({ items: compsData.items || [] })\n      });\n      \n      if (!fmvResponse.ok) {\n        console.warn('[searchStore] FMV calculation failed:', fmvResponse.status);\n        // Don't throw - FMV failure shouldn't stop the search\n        set({ fmv: null, loadingFmv: false });\n      } else {\n        const fmvData = await fmvResponse.json();\n        set({ \n          fmv: {\n            market_value: fmvData.market_value || fmvData.expected_high,\n            quick_sale: fmvData.quick_sale || fmvData.expected_low,\n            patient_sale: fmvData.patient_sale || fmvData.expected_high,\n            expected_low: fmvData.expected_low,\n            expected_high: fmvData.expected_high,\n            count: fmvData.count\n          },\n          loadingFmv: false\n        });\n        console.log('[searchStore] FMV calculated:', fmvData.market_value || fmvData.expected_high);\n      }\n      \n      // ========================================\n      // STEP 3: Fetch active listings\n      // ========================================\n      set({ loadingActive: true });\n      console.log('[searchStore] Fetching active listings...');\n      \n      const activeParams = new URLSearchParams({\n        query: fullQuery,\n        pages: '1',\n        delay: '2'\n      });\n      \n      try {\n        const activeResponse = await fetch(`/active?${activeParams}`, {\n          headers: authHeaders\n        });\n        \n        if (!activeResponse.ok) {\n          console.warn('[searchStore] Active listings fetch failed:', activeResponse.status);\n          set({ activeListings: [], loadingActive: false });\n        } else {\n          const activeData = await activeResponse.json();\n          set({ \n            activeListings: activeData.items || [],\n            loadingActive: false\n          });\n          console.log('[searchStore] Fetched', activeData.items?.length || 0, 'active listings');\n        }\n      } catch (activeError) {\n        // Active listings failure shouldn't break the whole search\n        console.warn('[searchStore] Active listings error:', activeError);\n        set({ activeListings: [], loadingActive: false });\n      }\n      \n    } catch (error) {\n      console.error('[searchStore] Search error:', error);\n      set({ error: error.message });\n    } finally {\n      set({ \n        loading: false, \n        loadingComps: false, \n        loadingFmv: false, \n        loadingActive: false \n      });\n    }\n  },\n  \n  // ============================================================================\n  // COMPUTED / DERIVED VALUES\n  // ============================================================================\n  \n  /**\n   * Get filtered active listings based on showAllActive toggle and FMV\n   * Returns only Buy It Now listings, optionally filtered to at/below FMV\n   * @returns {Array} - Filtered and sorted active listings\n   */\n  getFilteredActiveListings: () => {\n    const { activeListings, fmv, showAllActive } = get();\n    \n    if (!activeListings || activeListings.length === 0) return [];\n    \n    // Filter for Buy It Now only\n    let filtered = activeListings.filter(item => {\n      const buyingFormat = (item.buying_format || '').toLowerCase();\n      const hasBuyItNow = buyingFormat.includes('buy it now');\n      const price = getItemPrice(item);\n      return hasBuyItNow && price > 0;\n    });\n    \n    // If not showing all AND we have FMV, filter to items at or below FMV\n    if (!showAllActive && fmv?.market_value) {\n      filtered = filtered.filter(item => {\n        const price = getItemPrice(item);\n        return price <= fmv.market_value;\n      });\n    }\n    \n    // Sort by price (lowest to highest)\n    filtered.sort((a, b) => getItemPrice(a) - getItemPrice(b));\n    \n    return filtered;\n  },\n  \n  /**\n   * Get count of deals (listings below FMV)\n   * @returns {number} - Count of listings below FMV\n   */\n  getDealsCount: () => {\n    const { activeListings, fmv } = get();\n    \n    if (!activeListings || !fmv?.market_value) return 0;\n    \n    return activeListings.filter(item => {\n      const buyingFormat = (item.buying_format || '').toLowerCase();\n      const hasBuyItNow = buyingFormat.includes('buy it now');\n      const price = getItemPrice(item);\n      return hasBuyItNow && price > 0 && price <= fmv.market_value;\n    }).length;\n  },\n  \n  /**\n   * Check if search has results\n   * @returns {boolean}\n   */\n  hasResults: () => {\n    const { soldListings } = get();\n    return soldListings && soldListings.length > 0;\n  },\n  \n  /**\n   * Check if we have valid FMV data\n   * @returns {boolean}\n   */\n  hasFmv: () => {\n    const { fmv } = get();\n    return fmv && (fmv.market_value || fmv.expected_high);\n  },\n  \n  /**\n   * Check if we have calculated market metrics\n   * @returns {boolean}\n   */\n  hasMarketMetrics: () => {\n    const { marketMetrics } = get();\n    return marketMetrics !== null;\n  },\n  \n  // ============================================================================\n  // MARKET ANALYSIS ACTIONS\n  // ============================================================================\n  \n  /**\n   * Calculate market metrics from current sold/active listings and FMV\n   * Call this after search completes to populate market analysis data\n   */\n  calculateMarketMetrics: () => {\n    const { soldListings, activeListings, fmv } = get();\n    \n    if (!soldListings || soldListings.length === 0) {\n      console.log('[searchStore] Cannot calculate market metrics - no sold listings');\n      return;\n    }\n    \n    set({ loadingMarketAnalysis: true });\n    \n    try {\n      const fmvValue = fmv?.market_value || fmv?.expected_high;\n      \n      // Calculate individual metrics\n      const pressure = calculateMarketPressure(activeListings, fmvValue);\n      const confidence = calculateMarketConfidence(soldListings);\n      const liquidity = calculateLiquidityScore(\n        soldListings.length,\n        activeListings?.length || 0\n      );\n      \n      const metrics = { pressure, confidence, liquidity };\n      \n      // Determine market tier and generate advice\n      const tier = determineMarketTier(metrics);\n      const advice = generatePersonaAdvice(tier, metrics);\n      \n      // Calculate pricing recommendations\n      const pricing = fmvValue\n        ? getPricingRecommendations(fmvValue, pressure, liquidity)\n        : null;\n      \n      set({\n        marketMetrics: metrics,\n        marketTier: tier,\n        marketAdvice: advice,\n        pricingRecommendations: pricing,\n        loadingMarketAnalysis: false\n      });\n      \n      console.log('[searchStore] Market metrics calculated:', {\n        pressure: pressure.value,\n        confidence: confidence.value,\n        liquidity: liquidity.value,\n        tier: tier.label\n      });\n      \n    } catch (error) {\n      console.error('[searchStore] Error calculating market metrics:', error);\n      set({ loadingMarketAnalysis: false });\n    }\n  },\n  \n  /**\n   * Fetch market message from /market-message API endpoint\n   * Provides tier-specific advice based on market conditions\n   */\n  fetchMarketMessage: async () => {\n    const { marketTier, fmv, soldListings, activeListings } = get();\n    \n    if (!marketTier || !fmv) {\n      console.log('[searchStore] Cannot fetch market message - missing tier or FMV');\n      return;\n    }\n    \n    try {\n      const authHeaders = await getAuthHeaders();\n      \n      const response = await fetch('/market-message', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          ...authHeaders\n        },\n        body: JSON.stringify({\n          tier: marketTier.tier,\n          fmv: fmv.market_value || fmv.expected_high,\n          sold_count: soldListings?.length || 0,\n          active_count: activeListings?.length || 0\n        })\n      });\n      \n      if (response.ok) {\n        const messageData = await response.json();\n        set({ marketMessage: messageData });\n        console.log('[searchStore] Market message fetched:', messageData);\n      } else {\n        console.warn('[searchStore] Market message fetch failed:', response.status);\n      }\n    } catch (error) {\n      console.warn('[searchStore] Error fetching market message:', error);\n    }\n  },\n  \n  // ============================================================================\n  // CLEAR / RESET\n  // ============================================================================\n  \n  /**\n   * Clear search state (reset everything)\n   */\n  clearSearch: () => set({\n    query: '',\n    soldListings: [],\n    activeListings: [],\n    stats: null,\n    fmv: null,\n    error: null,\n    showAllActive: false,\n    loading: false,\n    loadingComps: false,\n    loadingActive: false,\n    loadingFmv: false,\n    loadingMarketAnalysis: false,\n    marketMetrics: null,\n    marketTier: null,\n    marketAdvice: null,\n    pricingRecommendations: null,\n    marketMessage: null\n  }),\n  \n  /**\n   * Clear just the results (keep query and filters)\n   */\n  clearResults: () => set({\n    soldListings: [],\n    activeListings: [],\n    stats: null,\n    fmv: null,\n    error: null,\n    showAllActive: false,\n    marketMetrics: null,\n    marketTier: null,\n    marketAdvice: null,\n    pricingRecommendations: null,\n    marketMessage: null\n  }),\n  \n  /**\n   * Clear error state\n   */\n  clearError: () => set({ error: null })\n}));\n\nexport default useSearchStore;\n","import { useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport useSearchStore from '../../stores/searchStore';\nimport { Button, Input } from '../ui';\n\n/**\n * Search form component with query input and filter checkboxes\n * \n * Features:\n * - Text input for search query\n * - Three filter checkboxes: excludeLots, ungradedOnly, baseOnly\n * - Search button with loading state\n * - Clear button\n * - Submit on Enter key or button click\n */\nfunction SearchForm({ className = '' }) {\n  const { \n    query, \n    setQuery, \n    filters, \n    toggleFilter, \n    search, \n    clearSearch, \n    loading \n  } = useSearchStore();\n\n  // Handle form submission\n  const handleSubmit = useCallback((e) => {\n    e.preventDefault();\n    if (query.trim()) {\n      search();\n    }\n  }, [query, search]);\n\n  // Handle Enter key in input\n  const handleKeyDown = useCallback((e) => {\n    if (e.key === 'Enter') {\n      handleSubmit(e);\n    }\n  }, [handleSubmit]);\n\n  // Handle input change\n  const handleQueryChange = useCallback((e) => {\n    setQuery(e.target.value);\n  }, [setQuery]);\n\n  return (\n    <form \n      className={`search-form ${className}`} \n      onSubmit={handleSubmit}\n      role=\"search\"\n    >\n      {/* Search Input */}\n      <div className=\"search-input-container\">\n        <Input\n          type=\"text\"\n          value={query}\n          onChange={handleQueryChange}\n          onKeyDown={handleKeyDown}\n          placeholder=\"Search for a card (e.g., 2020 Topps Chrome Luis Robert RC)\"\n          className=\"search-input\"\n          aria-label=\"Search query\"\n          iconLeft={\n            <svg \n              width=\"20\" \n              height=\"20\" \n              viewBox=\"0 0 24 24\" \n              fill=\"none\" \n              stroke=\"currentColor\" \n              strokeWidth=\"2\"\n              strokeLinecap=\"round\" \n              strokeLinejoin=\"round\"\n            >\n              <circle cx=\"11\" cy=\"11\" r=\"8\" />\n              <path d=\"m21 21-4.35-4.35\" />\n            </svg>\n          }\n        />\n      </div>\n\n      {/* Filter Checkboxes */}\n      <div className=\"search-filters\" role=\"group\" aria-label=\"Search filters\">\n        <label className=\"search-filter-checkbox\" title=\"Exclude listings that contain multiple cards (lots, bundles, 2x, 3x, etc.)\">\n          <input\n            type=\"checkbox\"\n            checked={filters.excludeLots}\n            onChange={() => toggleFilter('excludeLots')}\n          />\n          <span className=\"checkbox-label\">Exclude Lots</span>\n          <span className=\"tooltip-icon\" aria-hidden=\"true\">‚ìò</span>\n          <span className=\"tooltip-text\">Filter out multi-card listings, bundles, and lots</span>\n        </label>\n\n        <label className=\"search-filter-checkbox\" title=\"Only show raw/ungraded cards (excludes PSA, BGS, SGC, etc.)\">\n          <input\n            type=\"checkbox\"\n            checked={filters.ungradedOnly}\n            onChange={() => toggleFilter('ungradedOnly')}\n          />\n          <span className=\"checkbox-label\">Raw Only</span>\n          <span className=\"tooltip-icon\" aria-hidden=\"true\">‚ìò</span>\n          <span className=\"tooltip-text\">Exclude all graded cards (PSA, BGS, SGC, etc.)</span>\n        </label>\n\n        <label className=\"search-filter-checkbox\" title=\"Exclude parallels, refractors, variations, and short prints\">\n          <input\n            type=\"checkbox\"\n            checked={filters.baseOnly}\n            onChange={() => toggleFilter('baseOnly')}\n          />\n          <span className=\"checkbox-label\">Base Only</span>\n          <span className=\"tooltip-icon\" aria-hidden=\"true\">‚ìò</span>\n          <span className=\"tooltip-text\">Exclude parallels, refractors, and variations</span>\n        </label>\n      </div>\n\n      {/* Action Buttons */}\n      <div className=\"search-actions\">\n        <Button\n          type=\"submit\"\n          variant=\"primary\"\n          size=\"lg\"\n          loading={loading}\n          disabled={!query.trim()}\n          className=\"search-button\"\n        >\n          {loading ? 'Searching...' : 'Search'}\n        </Button>\n\n        <Button\n          type=\"button\"\n          variant=\"secondary\"\n          size=\"lg\"\n          onClick={clearSearch}\n          disabled={loading}\n          className=\"search-clear-button\"\n        >\n          Clear\n        </Button>\n      </div>\n    </form>\n  );\n}\n\nSearchForm.propTypes = {\n  className: PropTypes.string\n};\n\nexport default SearchForm;\n","import { useState, useMemo, useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport useSearchStore from '../../stores/searchStore';\nimport { formatMoney, escapeHtml, isMobileDevice, isIOSDevice } from '../../utils/searchUtils';\n\n/**\n * Table displaying sold listings (comps)\n * \n * Features:\n * - Sortable columns (Title, Price, Item ID)\n * - Links to eBay (uses deep_link for mobile)\n * - Row click to highlight\n * - Empty state when no results\n */\nfunction SoldListingsTable({ className = '' }) {\n  const { soldListings, loadingComps } = useSearchStore();\n  \n  // Sort state\n  const [sortColumn, setSortColumn] = useState('price');\n  const [sortDirection, setSortDirection] = useState('desc');\n  \n  // Selected row state\n  const [selectedRow, setSelectedRow] = useState(null);\n\n  // Handle column sort\n  const handleSort = useCallback((column) => {\n    if (sortColumn === column) {\n      setSortDirection(prev => prev === 'asc' ? 'desc' : 'asc');\n    } else {\n      setSortColumn(column);\n      setSortDirection('desc');\n    }\n  }, [sortColumn]);\n\n  // Sort listings\n  const sortedListings = useMemo(() => {\n    if (!soldListings || soldListings.length === 0) return [];\n    \n    const sorted = [...soldListings].sort((a, b) => {\n      let comparison = 0;\n      \n      switch (sortColumn) {\n        case 'title':\n          comparison = (a.title || '').localeCompare(b.title || '');\n          break;\n        case 'price':\n          comparison = (a.total_price || 0) - (b.total_price || 0);\n          break;\n        case 'item_id':\n          comparison = (a.item_id || '').localeCompare(b.item_id || '');\n          break;\n        default:\n          comparison = 0;\n      }\n      \n      return sortDirection === 'asc' ? comparison : -comparison;\n    });\n    \n    return sorted;\n  }, [soldListings, sortColumn, sortDirection]);\n\n  // Get sort indicator\n  const getSortIndicator = (column) => {\n    if (sortColumn !== column) return null;\n    return sortDirection === 'asc' ? ' ‚ñ≤' : ' ‚ñº';\n  };\n\n  // Handle row click\n  const handleRowClick = useCallback((itemId) => {\n    setSelectedRow(prev => prev === itemId ? null : itemId);\n  }, []);\n\n  // Get link URL (deep link on mobile, regular on desktop)\n  const getLinkUrl = (item) => {\n    const isMobile = isMobileDevice();\n    return (isMobile && item.deep_link) ? item.deep_link : item.link;\n  };\n\n  // Get link target attribute\n  const getLinkTarget = () => {\n    return isIOSDevice() ? '_self' : '_blank';\n  };\n\n  // Loading state\n  if (loadingComps) {\n    return (\n      <div className={`listings-table-container ${className}`}>\n        <h3 className=\"listings-table-title\">Recently Sold Listings</h3>\n        <div className=\"listings-table-loading\">\n          <div className=\"spinner spinner-md spinner-primary\" role=\"status\">\n            <span className=\"visually-hidden\">Loading sold listings...</span>\n          </div>\n          <span>Loading sold listings...</span>\n        </div>\n      </div>\n    );\n  }\n\n  // Empty state\n  if (!soldListings || soldListings.length === 0) {\n    return (\n      <div className={`listings-table-container ${className}`}>\n        <h3 className=\"listings-table-title\">Recently Sold Listings</h3>\n        <div className=\"listings-table-empty\">\n          <div className=\"listings-empty-icon\">üì≠</div>\n          <p className=\"listings-empty-text\">No recently sold listings found</p>\n          <p className=\"listings-empty-hint\">Try adjusting your search terms or filters</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={`listings-table-container ${className}`}>\n      <h3 className=\"listings-table-title\">Recently Sold Listings</h3>\n      <p className=\"listings-table-count\">\n        üìä {soldListings.length} results found\n      </p>\n      \n      <div className=\"listings-table-wrapper\">\n        <table className=\"listings-table\">\n          <thead>\n            <tr>\n              <th \n                onClick={() => handleSort('title')}\n                className=\"sortable-header\"\n                role=\"columnheader\"\n                aria-sort={sortColumn === 'title' ? (sortDirection === 'asc' ? 'ascending' : 'descending') : 'none'}\n              >\n                Title{getSortIndicator('title')}\n              </th>\n              <th \n                onClick={() => handleSort('price')}\n                className=\"sortable-header\"\n                role=\"columnheader\"\n                aria-sort={sortColumn === 'price' ? (sortDirection === 'asc' ? 'ascending' : 'descending') : 'none'}\n              >\n                Price{getSortIndicator('price')}\n              </th>\n              <th \n                onClick={() => handleSort('item_id')}\n                className=\"sortable-header\"\n                role=\"columnheader\"\n                aria-sort={sortColumn === 'item_id' ? (sortDirection === 'asc' ? 'ascending' : 'descending') : 'none'}\n              >\n                Item ID{getSortIndicator('item_id')}\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            {sortedListings.map((item) => (\n              <tr \n                key={item.item_id}\n                onClick={() => handleRowClick(item.item_id)}\n                className={selectedRow === item.item_id ? 'row-selected' : ''}\n              >\n                <td className=\"listing-title-cell\">\n                  {escapeHtml(item.title)}\n                </td>\n                <td className=\"listing-price-cell\">\n                  {formatMoney(item.total_price)}\n                </td>\n                <td className=\"listing-id-cell\">\n                  <a \n                    href={getLinkUrl(item)}\n                    target={getLinkTarget()}\n                    rel=\"noopener noreferrer\"\n                    onClick={(e) => e.stopPropagation()}\n                    className=\"listing-link\"\n                  >\n                    {item.item_id}\n                  </a>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n}\n\nSoldListingsTable.propTypes = {\n  className: PropTypes.string\n};\n\nexport default SoldListingsTable;\n","import { useState, useMemo, useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport useSearchStore from '../../stores/searchStore';\nimport { formatMoney, escapeHtml, getItemPrice, isMobileDevice, isIOSDevice } from '../../utils/searchUtils';\n\n/**\n * Table displaying active listings\n * \n * Features:\n * - \"See All\" toggle to show all listings or just below FMV\n * - Columns: Title, Price, Discount, Type, Item ID (link)\n * - Discount calculated from FMV: ((fmv - price) / fmv * 100)\n * - Color-coded discounts (green for positive, red for negative)\n * - Shows \"Buy It Now\" listings only\n * - Sortable columns\n * - Links to eBay (uses deep_link for mobile)\n */\nfunction ActiveListingsTable({ className = '' }) {\n  const { activeListings, fmv, loadingActive, getFilteredActiveListings } = useSearchStore();\n  \n  // Toggle for showing all vs filtered listings\n  const [showAll, setShowAll] = useState(false);\n  \n  // Sort state\n  const [sortColumn, setSortColumn] = useState('discount');\n  const [sortDirection, setSortDirection] = useState('desc');\n  \n  // Selected row state\n  const [selectedRow, setSelectedRow] = useState(null);\n\n  // Get Market Value for discount calculation\n  const marketValue = fmv?.marketValue || 0;\n\n  // Filter listings based on showAll toggle\n  const filteredListings = useMemo(() => {\n    if (showAll) {\n      return activeListings || [];\n    }\n    return getFilteredActiveListings();\n  }, [activeListings, showAll, getFilteredActiveListings]);\n\n  // Calculate discount percentage for a listing\n  const calculateDiscount = useCallback((item) => {\n    if (!marketValue || marketValue === 0) return 0;\n    const price = getItemPrice(item);\n    return ((marketValue - price) / marketValue) * 100;\n  }, [marketValue]);\n\n  // Handle column sort\n  const handleSort = useCallback((column) => {\n    if (sortColumn === column) {\n      setSortDirection(prev => prev === 'asc' ? 'desc' : 'asc');\n    } else {\n      setSortColumn(column);\n      setSortDirection('desc');\n    }\n  }, [sortColumn]);\n\n  // Sort listings\n  const sortedListings = useMemo(() => {\n    if (!filteredListings || filteredListings.length === 0) return [];\n    \n    const sorted = [...filteredListings].sort((a, b) => {\n      let comparison = 0;\n      \n      switch (sortColumn) {\n        case 'title':\n          comparison = (a.title || '').localeCompare(b.title || '');\n          break;\n        case 'price':\n          comparison = getItemPrice(a) - getItemPrice(b);\n          break;\n        case 'discount':\n          comparison = calculateDiscount(a) - calculateDiscount(b);\n          break;\n        case 'type':\n          comparison = (a.buying_options?.[0] || '').localeCompare(b.buying_options?.[0] || '');\n          break;\n        case 'item_id':\n          comparison = (a.item_id || '').localeCompare(b.item_id || '');\n          break;\n        default:\n          comparison = 0;\n      }\n      \n      return sortDirection === 'asc' ? comparison : -comparison;\n    });\n    \n    return sorted;\n  }, [filteredListings, sortColumn, sortDirection, calculateDiscount]);\n\n  // Get sort indicator\n  const getSortIndicator = (column) => {\n    if (sortColumn !== column) return null;\n    return sortDirection === 'asc' ? ' ‚ñ≤' : ' ‚ñº';\n  };\n\n  // Handle row click\n  const handleRowClick = useCallback((itemId) => {\n    setSelectedRow(prev => prev === itemId ? null : itemId);\n  }, []);\n\n  // Get link URL (deep link on mobile, regular on desktop)\n  const getLinkUrl = (item) => {\n    const isMobile = isMobileDevice();\n    return (isMobile && item.deep_link) ? item.deep_link : item.link;\n  };\n\n  // Get link target attribute\n  const getLinkTarget = () => {\n    return isIOSDevice() ? '_self' : '_blank';\n  };\n\n  // Format discount with sign and color class\n  const formatDiscount = (discount) => {\n    const sign = discount >= 0 ? '+' : '';\n    const colorClass = discount >= 0 ? 'discount-positive' : 'discount-negative';\n    return {\n      text: `${sign}${discount.toFixed(1)}%`,\n      colorClass\n    };\n  };\n\n  // Get buying type label\n  const getBuyingType = (item) => {\n    if (!item.buying_options || item.buying_options.length === 0) {\n      return 'Unknown';\n    }\n    const option = item.buying_options[0];\n    if (option === 'FIXED_PRICE') return 'Buy It Now';\n    if (option === 'AUCTION') return 'Auction';\n    if (option === 'BEST_OFFER') return 'Best Offer';\n    return option;\n  };\n\n  // Loading state\n  if (loadingActive) {\n    return (\n      <div className={`listings-table-container ${className}`}>\n        <h3 className=\"listings-table-title\">Active Listings</h3>\n        <div className=\"listings-table-loading\">\n          <div className=\"spinner spinner-md spinner-primary\" role=\"status\">\n            <span className=\"visually-hidden\">Loading active listings...</span>\n          </div>\n          <span>Loading active listings...</span>\n        </div>\n      </div>\n    );\n  }\n\n  // Empty state\n  if (!activeListings || activeListings.length === 0) {\n    return (\n      <div className={`listings-table-container ${className}`}>\n        <h3 className=\"listings-table-title\">Active Listings</h3>\n        <div className=\"listings-table-empty\">\n          <div className=\"listings-empty-icon\">üõí</div>\n          <p className=\"listings-empty-text\">No active listings found</p>\n          <p className=\"listings-empty-hint\">Try adjusting your search terms or filters</p>\n        </div>\n      </div>\n    );\n  }\n\n  // No filtered results state\n  if (!showAll && sortedListings.length === 0) {\n    return (\n      <div className={`listings-table-container ${className}`}>\n        <h3 className=\"listings-table-title\">Active Listings</h3>\n        <div className=\"listings-table-controls\">\n          <label className=\"listings-toggle-label\">\n            <input\n              type=\"checkbox\"\n              checked={showAll}\n              onChange={(e) => setShowAll(e.target.checked)}\n              className=\"listings-toggle-checkbox\"\n            />\n            <span>See All ({activeListings.length} total)</span>\n          </label>\n        </div>\n        <div className=\"listings-table-empty\">\n          <div className=\"listings-empty-icon\">üí∞</div>\n          <p className=\"listings-empty-text\">No listings below Market Value</p>\n          <p className=\"listings-empty-hint\">Enable &quot;See All&quot; to view all active listings</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={`listings-table-container ${className}`}>\n      <h3 className=\"listings-table-title\">Active Listings</h3>\n      \n      <div className=\"listings-table-controls\">\n        <label className=\"listings-toggle-label\">\n          <input\n            type=\"checkbox\"\n            checked={showAll}\n            onChange={(e) => setShowAll(e.target.checked)}\n            className=\"listings-toggle-checkbox\"\n          />\n          <span>See All ({activeListings.length} total)</span>\n        </label>\n        <p className=\"listings-table-count\">\n          üè∑Ô∏è {sortedListings.length} {showAll ? 'listings' : 'below market value'}\n        </p>\n      </div>\n      \n      <div className=\"listings-table-wrapper\">\n        <table className=\"listings-table\">\n          <thead>\n            <tr>\n              <th \n                onClick={() => handleSort('title')}\n                className=\"sortable-header\"\n                role=\"columnheader\"\n                aria-sort={sortColumn === 'title' ? (sortDirection === 'asc' ? 'ascending' : 'descending') : 'none'}\n              >\n                Title{getSortIndicator('title')}\n              </th>\n              <th \n                onClick={() => handleSort('price')}\n                className=\"sortable-header\"\n                role=\"columnheader\"\n                aria-sort={sortColumn === 'price' ? (sortDirection === 'asc' ? 'ascending' : 'descending') : 'none'}\n              >\n                Price{getSortIndicator('price')}\n              </th>\n              <th \n                onClick={() => handleSort('discount')}\n                className=\"sortable-header\"\n                role=\"columnheader\"\n                aria-sort={sortColumn === 'discount' ? (sortDirection === 'asc' ? 'ascending' : 'descending') : 'none'}\n              >\n                Discount{getSortIndicator('discount')}\n              </th>\n              <th \n                onClick={() => handleSort('type')}\n                className=\"sortable-header\"\n                role=\"columnheader\"\n                aria-sort={sortColumn === 'type' ? (sortDirection === 'asc' ? 'ascending' : 'descending') : 'none'}\n              >\n                Type{getSortIndicator('type')}\n              </th>\n              <th \n                onClick={() => handleSort('item_id')}\n                className=\"sortable-header\"\n                role=\"columnheader\"\n                aria-sort={sortColumn === 'item_id' ? (sortDirection === 'asc' ? 'ascending' : 'descending') : 'none'}\n              >\n                Item ID{getSortIndicator('item_id')}\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            {sortedListings.map((item) => {\n              const discount = calculateDiscount(item);\n              const { text: discountText, colorClass } = formatDiscount(discount);\n              \n              return (\n                <tr \n                  key={item.item_id}\n                  onClick={() => handleRowClick(item.item_id)}\n                  className={selectedRow === item.item_id ? 'row-selected' : ''}\n                >\n                  <td className=\"listing-title-cell\">\n                    {escapeHtml(item.title)}\n                  </td>\n                  <td className=\"listing-price-cell\">\n                    {formatMoney(getItemPrice(item))}\n                  </td>\n                  <td className={`listing-discount-cell ${colorClass}`}>\n                    {marketValue > 0 ? discountText : 'N/A'}\n                  </td>\n                  <td className=\"listing-type-cell\">\n                    {getBuyingType(item)}\n                  </td>\n                  <td className=\"listing-id-cell\">\n                    <a \n                      href={getLinkUrl(item)}\n                      target={getLinkTarget()}\n                      rel=\"noopener noreferrer\"\n                      onClick={(e) => e.stopPropagation()}\n                      className=\"listing-link\"\n                    >\n                      {item.item_id}\n                    </a>\n                  </td>\n                </tr>\n              );\n            })}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n}\n\nActiveListingsTable.propTypes = {\n  className: PropTypes.string\n};\n\nexport default ActiveListingsTable;\n","import PropTypes from 'prop-types';\nimport useSearchStore from '../../stores/searchStore';\nimport { formatMoney } from '../../utils/searchUtils';\n\n/**\n * Display price statistics (min, max, avg)\n * \n * Features:\n * - 3-column grid with values\n * - Formatted currency display\n * - Loading skeletons when fetching\n * - Handles missing data gracefully\n */\nfunction StatsGrid({ className = '' }) {\n  const { stats, loadingComps } = useSearchStore();\n\n  // Loading state with skeleton placeholders\n  if (loadingComps) {\n    return (\n      <div className={`stats-grid ${className}`}>\n        <div className=\"stats-item stats-skeleton\">\n          <span className=\"stats-label\">Minimum</span>\n          <span className=\"stats-value skeleton-text\">Loading...</span>\n        </div>\n        <div className=\"stats-item stats-skeleton\">\n          <span className=\"stats-label\">Average</span>\n          <span className=\"stats-value skeleton-text\">Loading...</span>\n        </div>\n        <div className=\"stats-item stats-skeleton\">\n          <span className=\"stats-label\">Maximum</span>\n          <span className=\"stats-value skeleton-text\">Loading...</span>\n        </div>\n      </div>\n    );\n  }\n\n  // Empty state when no stats available\n  if (!stats || stats.count === 0) {\n    return (\n      <div className={`stats-grid stats-empty ${className}`}>\n        <div className=\"stats-item\">\n          <span className=\"stats-label\">Minimum</span>\n          <span className=\"stats-value stats-value-empty\">--</span>\n        </div>\n        <div className=\"stats-item\">\n          <span className=\"stats-label\">Average</span>\n          <span className=\"stats-value stats-value-empty\">--</span>\n        </div>\n        <div className=\"stats-item\">\n          <span className=\"stats-label\">Maximum</span>\n          <span className=\"stats-value stats-value-empty\">--</span>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={`stats-grid ${className}`}>\n      <div className=\"stats-item stats-item-min\">\n        <span className=\"stats-label\">Minimum</span>\n        <span className=\"stats-value\">{formatMoney(stats.min)}</span>\n        <span className=\"stats-sublabel\">Lowest sale</span>\n      </div>\n      <div className=\"stats-item stats-item-avg\">\n        <span className=\"stats-label\">Average</span>\n        <span className=\"stats-value stats-value-main\">{formatMoney(stats.avg)}</span>\n        <span className=\"stats-sublabel\">Mean of {stats.count} sales</span>\n      </div>\n      <div className=\"stats-item stats-item-max\">\n        <span className=\"stats-label\">Maximum</span>\n        <span className=\"stats-value\">{formatMoney(stats.max)}</span>\n        <span className=\"stats-sublabel\">Highest sale</span>\n      </div>\n    </div>\n  );\n}\n\nStatsGrid.propTypes = {\n  className: PropTypes.string\n};\n\nexport default StatsGrid;\n","import PropTypes from 'prop-types';\nimport useSearchStore from '../../stores/searchStore';\nimport { formatMoney } from '../../utils/searchUtils';\n\n/**\n * Display FMV values (Quick Sale, Market Value, Patient Sale)\n * \n * Features:\n * - 3-column grid with labels and values\n * - Visual distinction for Market Value (center, larger)\n * - Loading state with skeleton placeholders\n * - Tooltip explanations for each value\n */\nfunction FMVDisplay({ className = '' }) {\n  const { fmv, loadingComps } = useSearchStore();\n\n  // Loading state with skeleton placeholders\n  if (loadingComps) {\n    return (\n      <div className={`fmv-display ${className}`}>\n        <h3 className=\"fmv-title\">Fair Market Value</h3>\n        <div className=\"fmv-grid\">\n          <div className=\"fmv-item fmv-skeleton\">\n            <span className=\"fmv-label\">Quick Sale</span>\n            <span className=\"fmv-value skeleton-text\">Loading...</span>\n          </div>\n          <div className=\"fmv-item fmv-item-main fmv-skeleton\">\n            <span className=\"fmv-label\">Market Value</span>\n            <span className=\"fmv-value skeleton-text\">Loading...</span>\n          </div>\n          <div className=\"fmv-item fmv-skeleton\">\n            <span className=\"fmv-label\">Patient Sale</span>\n            <span className=\"fmv-value skeleton-text\">Loading...</span>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Empty state when no FMV data available\n  if (!fmv || !fmv.marketValue) {\n    return (\n      <div className={`fmv-display fmv-empty ${className}`}>\n        <h3 className=\"fmv-title\">Fair Market Value</h3>\n        <div className=\"fmv-grid\">\n          <div className=\"fmv-item\">\n            <span className=\"fmv-label\">Quick Sale</span>\n            <span className=\"fmv-value fmv-value-empty\">--</span>\n          </div>\n          <div className=\"fmv-item fmv-item-main\">\n            <span className=\"fmv-label\">Market Value</span>\n            <span className=\"fmv-value fmv-value-empty\">--</span>\n          </div>\n          <div className=\"fmv-item\">\n            <span className=\"fmv-label\">Patient Sale</span>\n            <span className=\"fmv-value fmv-value-empty\">--</span>\n          </div>\n        </div>\n        <p className=\"fmv-hint\">Search for a card to calculate FMV</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className={`fmv-display ${className}`}>\n      <h3 className=\"fmv-title\">Fair Market Value</h3>\n      <div className=\"fmv-grid\">\n        <div className=\"fmv-item fmv-item-quick\">\n          <span className=\"fmv-label\">Quick Sale</span>\n          <span className=\"fmv-value fmv-value-quick\">{formatMoney(fmv.quickSale)}</span>\n          <span className=\"fmv-sublabel\" title=\"Sell within 24-48 hours at a discount\">\n            üèÉ Fast sale price\n          </span>\n        </div>\n        <div className=\"fmv-item fmv-item-main\">\n          <span className=\"fmv-label\">Market Value</span>\n          <span className=\"fmv-value fmv-value-market\">{formatMoney(fmv.marketValue)}</span>\n          <span className=\"fmv-sublabel\" title=\"Average recent sales price\">\n            üí∞ Fair price\n          </span>\n        </div>\n        <div className=\"fmv-item fmv-item-patient\">\n          <span className=\"fmv-label\">Patient Sale</span>\n          <span className=\"fmv-value fmv-value-patient\">{formatMoney(fmv.patientSale)}</span>\n          <span className=\"fmv-sublabel\" title=\"Wait for the right buyer at premium\">\n            ‚è≥ Maximum price\n          </span>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nFMVDisplay.propTypes = {\n  className: PropTypes.string\n};\n\nexport default FMVDisplay;\n","/**\n * Chart utility functions for canvas-based visualizations\n * Extracted from static/script.js for React migration\n */\n\n/**\n * Format a numeric value as currency\n * @param {number} value - Price value\n * @returns {string} Formatted price string (e.g., \"$12.34\")\n */\nexport function formatMoney(value) {\n  if (value == null || isNaN(value)) return \"N/A\";\n  return \"$\" + value.toFixed(2);\n}\n\n/**\n * Filter outliers from price array using IQR method\n * @param {number[]} prices - Array of price values\n * @returns {number[]} Filtered prices with outliers removed\n */\nexport function filterOutliers(prices) {\n  if (!prices || prices.length === 0) return [];\n  \n  if (prices.length < 4) {\n    // Need at least 4 data points for meaningful outlier detection\n    return prices;\n  }\n  \n  // Sort prices to find quartiles\n  const sorted = [...prices].sort((a, b) => a - b);\n  const n = sorted.length;\n  \n  // Calculate Q1, Q3, and IQR\n  const q1Index = Math.floor(n * 0.25);\n  const q3Index = Math.floor(n * 0.75);\n  const q1 = sorted[q1Index];\n  const q3 = sorted[q3Index];\n  const iqr = q3 - q1;\n  \n  // Define outlier bounds (1.5 * IQR is the standard threshold)\n  const lowerBound = q1 - 1.5 * iqr;\n  const upperBound = q3 + 1.5 * iqr;\n  \n  // Filter out outliers\n  return prices.filter(price => price >= lowerBound && price <= upperBound);\n}\n\n/**\n * Calculate bins for histogram from price data\n * @param {number[]} prices - Array of price values\n * @param {number} numBins - Number of bins to create\n * @param {number} minPrice - Minimum price in range\n * @param {number} maxPrice - Maximum price in range\n * @returns {number[]} Array of bin counts\n */\nexport function calculateBins(prices, numBins, minPrice, maxPrice) {\n  const bins = new Array(numBins).fill(0);\n  const priceRange = maxPrice - minPrice;\n  const binWidth = priceRange / numBins;\n  \n  prices.forEach(price => {\n    let binIndex = Math.floor((price - minPrice) / binWidth);\n    if (binIndex >= numBins) binIndex = numBins - 1;\n    if (binIndex < 0) binIndex = 0;\n    bins[binIndex]++;\n  });\n  \n  return bins;\n}\n\n/**\n * Simple beeswarm layout with collision detection\n * Positions dots to avoid overlap vertically\n * @param {number[]} prices - Array of price values\n * @param {Function} xScale - Function to convert price to x coordinate\n * @param {number} centerY - Vertical center of the chart\n * @param {number} radius - Radius of each dot\n * @param {number} maxYOffset - Maximum vertical displacement\n * @returns {Array<{x: number, y: number, price: number}>} Array of positioned points\n */\nexport function beeswarmLayout(prices, xScale, centerY, radius = 4, maxYOffset = 60) {\n  const points = prices.map(price => ({\n    x: xScale(price),\n    y: centerY,\n    price,\n    r: radius,\n    originalY: centerY\n  }));\n  \n  const placedPoints = [];\n  \n  for (const point of points) {\n    let y = point.originalY;\n    let collided = true;\n    let attempts = 0;\n    let yOffset = 0;\n\n    while (collided && attempts < 200) {\n      collided = false;\n      \n      // Check collision with previously placed points\n      for (const placed of placedPoints) {\n        const dx = point.x - placed.x;\n        const dy = y - placed.y;\n        const distance = Math.sqrt(dx * dx + dy * dy);\n        const minDistance = point.r + placed.r + 1;\n        \n        if (distance < minDistance) {\n          collided = true;\n          break;\n        }\n      }\n      \n      if (collided) {\n        attempts++;\n        // Use systematic offset instead of random\n        yOffset = Math.ceil(attempts / 2) * (point.r * 2 + 1);\n        const direction = attempts % 2 === 1 ? 1 : -1;\n        y = centerY + (direction * yOffset);\n        \n        // If we've exceeded max offset, force placement\n        if (yOffset > maxYOffset) {\n          break;\n        }\n      }\n    }\n    \n    placedPoints.push({\n      x: point.x,\n      y,\n      price: point.price,\n      r: point.r\n    });\n  }\n  \n  return placedPoints;\n}\n\n/**\n * Get canvas scale factor for high-DPI displays\n * @param {CanvasRenderingContext2D} ctx - Canvas context\n * @returns {number} Device pixel ratio\n */\nexport function getCanvasScale(ctx) {\n  const dpr = window.devicePixelRatio || 1;\n  const bsr = ctx.webkitBackingStorePixelRatio ||\n              ctx.mozBackingStorePixelRatio ||\n              ctx.msBackingStorePixelRatio ||\n              ctx.oBackingStorePixelRatio ||\n              ctx.backingStorePixelRatio || 1;\n  return dpr / bsr;\n}\n\n/**\n * Set up canvas for high-DPI displays\n * @param {HTMLCanvasElement} canvas - Canvas element\n * @param {number} width - Desired display width\n * @param {number} height - Desired display height\n */\nexport function setupHiDPICanvas(canvas, width, height) {\n  const ctx = canvas.getContext('2d');\n  const ratio = getCanvasScale(ctx);\n  \n  canvas.width = width * ratio;\n  canvas.height = height * ratio;\n  canvas.style.width = width + 'px';\n  canvas.style.height = height + 'px';\n  \n  ctx.scale(ratio, ratio);\n  \n  return ctx;\n}\n\n/**\n * Calculate standard deviation of values\n * @param {number[]} values - Array of numeric values\n * @returns {number} Standard deviation\n */\nexport function calculateStdDev(values) {\n  if (values.length === 0) return 0;\n  const avg = values.reduce((sum, val) => sum + val, 0) / values.length;\n  const squareDiffs = values.map(value => Math.pow(value - avg, 2));\n  const avgSquareDiff = squareDiffs.reduce((sum, val) => sum + val, 0) / values.length;\n  return Math.sqrt(avgSquareDiff);\n}\n\n/**\n * Draw a rounded rectangle path on canvas\n * @param {CanvasRenderingContext2D} ctx - Canvas context\n * @param {number} x - X position\n * @param {number} y - Y position\n * @param {number} width - Rectangle width\n * @param {number} height - Rectangle height\n * @param {number} radius - Corner radius\n */\nexport function roundedRect(ctx, x, y, width, height, radius) {\n  ctx.beginPath();\n  ctx.moveTo(x + radius, y);\n  ctx.lineTo(x + width - radius, y);\n  ctx.quadraticCurveTo(x + width, y, x + width, y + radius);\n  ctx.lineTo(x + width, y + height - radius);\n  ctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);\n  ctx.lineTo(x + radius, y + height);\n  ctx.quadraticCurveTo(x, y + height, x, y + height - radius);\n  ctx.lineTo(x, y + radius);\n  ctx.quadraticCurveTo(x, y, x + radius, y);\n  ctx.closePath();\n}\n\n/**\n * Draw a tooltip with price value\n * @param {CanvasRenderingContext2D} ctx - Canvas context\n * @param {string} text - Text to display\n * @param {number} x - X position (center of tooltip)\n * @param {number} y - Y position (bottom of tooltip)\n * @param {string} bgColor - Background color\n * @param {string} textColor - Text color\n */\nexport function drawTooltip(ctx, text, x, y, bgColor = 'rgba(255, 149, 0, 0.95)', textColor = '#ffffff') {\n  ctx.font = 'bold 14px sans-serif';\n  const textWidth = ctx.measureText(text).width;\n  const padding = 8;\n  const tooltipWidth = textWidth + (padding * 2);\n  const tooltipHeight = 28;\n  const radius = 4;\n  \n  // Position tooltip\n  let tooltipX = x - (tooltipWidth / 2);\n  const tooltipY = y - tooltipHeight;\n  \n  // Draw background with rounded corners\n  ctx.fillStyle = bgColor;\n  roundedRect(ctx, tooltipX, tooltipY, tooltipWidth, tooltipHeight, radius);\n  ctx.fill();\n  \n  // Draw text\n  ctx.fillStyle = textColor;\n  ctx.textAlign = 'center';\n  ctx.fillText(text, x, y - 8);\n}\n\n/**\n * Default chart margins\n */\nexport const DEFAULT_MARGINS = {\n  top: 60,\n  right: 40,\n  bottom: 70,\n  left: 40\n};\n\n/**\n * Chart color palette\n */\nexport const CHART_COLORS = {\n  // Primary colors\n  soldBlue: 'rgba(0, 122, 255, 0.7)',\n  soldBlueBorder: 'rgba(0, 122, 255, 0.9)',\n  activeRed: 'rgba(255, 59, 48, 0.6)',\n  activeRedBorder: 'rgba(255, 59, 48, 0.9)',\n  \n  // FMV band colors\n  fmvGreen: 'rgba(52, 199, 89, 0.2)',\n  fmvGreenLight: 'rgba(48, 209, 88, 0.15)',\n  fmvGreenBorder: 'rgba(52, 199, 89, 0.8)',\n  \n  // UI colors\n  axisColor: '#d2d2d7',\n  labelColor: '#6e6e73',\n  textColor: '#1d1d1f',\n  gridColor: '#e5e5ea',\n  crosshairColor: 'rgba(255, 149, 0, 0.9)',\n  \n  // Status colors\n  success: '#34c759',\n  warning: '#ff9500',\n  error: '#ff3b30'\n};\n","/**\n * BeeswarmChart - Canvas-based beeswarm chart showing price distribution\n * Shows FMV range band and individual price points with collision detection\n * Interactive crosshair with price display\n */\nimport { useRef, useEffect, useCallback, useState } from 'react';\nimport useSearchStore from '../../stores/searchStore';\nimport {\n  formatMoney,\n  filterOutliers,\n  beeswarmLayout,\n  drawTooltip,\n  CHART_COLORS,\n  DEFAULT_MARGINS\n} from '../../utils/chartUtils';\n\nconst BeeswarmChart = () => {\n  const canvasRef = useRef(null);\n  const containerRef = useRef(null);\n  const [crosshairX, setCrosshairX] = useState(null);\n  const [dimensions, setDimensions] = useState({ width: 0, height: 250 });\n  \n  // Get data from search store (using actual store property names)\n  const soldListings = useSearchStore((state) => state.soldListings);\n  const fmv = useSearchStore((state) => state.fmv);\n  \n  // Extract prices from sold listings\n  const prices = soldListings?.map(item => item.total_price).filter(p => p > 0) || [];\n  \n  // Set up resize observer\n  useEffect(() => {\n    if (!containerRef.current) return;\n    \n    const resizeObserver = new ResizeObserver(entries => {\n      for (const entry of entries) {\n        const { width } = entry.contentRect;\n        if (width > 0) {\n          setDimensions(prev => ({ ...prev, width }));\n        }\n      }\n    });\n    \n    resizeObserver.observe(containerRef.current);\n    \n    // Initial measurement\n    const initialWidth = containerRef.current.offsetWidth;\n    if (initialWidth > 0) {\n      setDimensions(prev => ({ ...prev, width: initialWidth }));\n    }\n    \n    return () => resizeObserver.disconnect();\n  }, []);\n  \n  // Draw the chart\n  const drawChart = useCallback(() => {\n    const canvas = canvasRef.current;\n    if (!canvas || dimensions.width === 0) return;\n    \n    const ctx = canvas.getContext('2d');\n    const { width, height } = dimensions;\n    const margin = { ...DEFAULT_MARGINS };\n    const innerWidth = width - margin.left - margin.right;\n    const innerHeight = height - margin.top - margin.bottom;\n    \n    // Set canvas size\n    canvas.width = width;\n    canvas.height = height;\n    \n    // Clear canvas\n    ctx.clearRect(0, 0, width, height);\n    \n    // Draw background\n    ctx.fillStyle = '#f8f9fa';\n    ctx.fillRect(0, 0, width, height);\n    \n    // Draw title\n    ctx.fillStyle = CHART_COLORS.textColor;\n    ctx.font = 'bold 16px system-ui, -apple-system, sans-serif';\n    ctx.textAlign = 'center';\n    ctx.fillText('Fair Market Value Ranges', width / 2, 25);\n    \n    // Filter and validate prices\n    const validPrices = prices.filter(p => p != null && !isNaN(p) && p > 0);\n    \n    if (validPrices.length === 0) {\n      ctx.fillStyle = CHART_COLORS.labelColor;\n      ctx.font = '16px system-ui, -apple-system, sans-serif';\n      ctx.textAlign = 'center';\n      ctx.fillText('No price data available', width / 2, height / 2);\n      ctx.fillText('Run a search to see results', width / 2, height / 2 + 25);\n      return;\n    }\n    \n    // Filter outliers\n    const filteredPrices = filterOutliers(validPrices);\n    \n    if (filteredPrices.length === 0) {\n      ctx.fillStyle = CHART_COLORS.labelColor;\n      ctx.font = '16px system-ui, -apple-system, sans-serif';\n      ctx.textAlign = 'center';\n      ctx.fillText('No data after filtering', width / 2, height / 2);\n      return;\n    }\n    \n    const minPrice = Math.min(...filteredPrices);\n    const maxPrice = Math.max(...filteredPrices);\n    const priceRange = maxPrice - minPrice;\n    \n    // X scale function\n    const xScale = (price) => {\n      if (priceRange === 0) {\n        return width / 2;\n      }\n      return margin.left + ((price - minPrice) / priceRange) * innerWidth;\n    };\n    \n    // Draw FMV band if available\n    const expectLow = fmv?.quick_sale || fmv?.expected_low;\n    const expectHigh = fmv?.patient_sale || fmv?.expected_high;\n    const marketValue = fmv?.market_value || expectHigh;\n    \n    if (expectLow && expectHigh && priceRange > 0) {\n      const x1 = xScale(expectLow);\n      const x2 = xScale(expectHigh);\n      \n      // Create gradient for FMV band\n      const gradient = ctx.createLinearGradient(x1, margin.top, x2, height - margin.bottom);\n      gradient.addColorStop(0, CHART_COLORS.fmvGreen);\n      gradient.addColorStop(0.5, CHART_COLORS.fmvGreenLight);\n      gradient.addColorStop(1, 'rgba(52, 199, 89, 0.1)');\n      \n      // Draw gradient band\n      ctx.shadowColor = 'rgba(52, 199, 89, 0.3)';\n      ctx.shadowBlur = 8;\n      ctx.shadowOffsetY = 2;\n      ctx.fillStyle = gradient;\n      ctx.fillRect(x1, margin.top, x2 - x1, innerHeight);\n      \n      // Reset shadow\n      ctx.shadowColor = 'transparent';\n      ctx.shadowBlur = 0;\n      ctx.shadowOffsetY = 0;\n      \n      // Draw FMV range border lines\n      const lineGradient = ctx.createLinearGradient(0, margin.top, 0, height - margin.bottom);\n      lineGradient.addColorStop(0, 'rgba(0, 122, 255, 0.8)');\n      lineGradient.addColorStop(0.5, 'rgba(52, 199, 89, 0.9)');\n      lineGradient.addColorStop(1, 'rgba(0, 122, 255, 0.6)');\n      \n      ctx.strokeStyle = lineGradient;\n      ctx.lineWidth = 3;\n      ctx.setLineDash([8, 4]);\n      \n      // Draw FMV lines with glow\n      ctx.shadowColor = 'rgba(0, 122, 255, 0.5)';\n      ctx.shadowBlur = 6;\n      \n      ctx.beginPath();\n      ctx.moveTo(x1, margin.top);\n      ctx.lineTo(x1, height - margin.bottom);\n      ctx.stroke();\n      \n      ctx.beginPath();\n      ctx.moveTo(x2, margin.top);\n      ctx.lineTo(x2, height - margin.bottom);\n      ctx.stroke();\n      \n      ctx.setLineDash([]);\n      ctx.shadowColor = 'transparent';\n      ctx.shadowBlur = 0;\n      \n      // FMV dollar value labels\n      ctx.fillStyle = CHART_COLORS.success;\n      ctx.font = 'bold 11px system-ui, -apple-system, sans-serif';\n      ctx.textAlign = 'center';\n      ctx.fillText(formatMoney(expectLow), x1, margin.top - 8);\n      ctx.fillText(formatMoney(expectHigh), x2, margin.top - 8);\n    }\n    \n    // Calculate beeswarm layout for points\n    const centerY = height / 2;\n    const maxYOffset = Math.min(innerHeight / 2 - 10, 60);\n    const points = beeswarmLayout(filteredPrices, xScale, centerY, 4, maxYOffset);\n    \n    // Keep points within vertical bounds\n    const drawablePoints = points.map(point => ({\n      ...point,\n      y: Math.max(margin.top + 4, Math.min(height - margin.bottom - 4, point.y))\n    }));\n    \n    // Draw points\n    drawablePoints.forEach(point => {\n      ctx.beginPath();\n      ctx.arc(point.x, point.y, point.r, 0, 2 * Math.PI);\n      ctx.fillStyle = CHART_COLORS.soldBlue;\n      ctx.fill();\n      ctx.strokeStyle = CHART_COLORS.soldBlueBorder;\n      ctx.lineWidth = 1;\n      ctx.stroke();\n    });\n    \n    // Draw X-axis\n    ctx.beginPath();\n    ctx.moveTo(margin.left, height - margin.bottom);\n    ctx.lineTo(width - margin.right, height - margin.bottom);\n    ctx.strokeStyle = CHART_COLORS.axisColor;\n    ctx.lineWidth = 1;\n    ctx.stroke();\n    \n    // X-axis labels\n    ctx.fillStyle = CHART_COLORS.labelColor;\n    ctx.font = '11px system-ui, -apple-system, sans-serif';\n    ctx.textAlign = 'center';\n    \n    if (priceRange > 0) {\n      // Min price\n      ctx.fillText('Min', margin.left, height - margin.bottom + 15);\n      ctx.fillStyle = CHART_COLORS.textColor;\n      ctx.font = 'bold 12px system-ui, -apple-system, sans-serif';\n      ctx.fillText(formatMoney(minPrice), margin.left, height - margin.bottom + 30);\n      \n      // Max price\n      ctx.fillStyle = CHART_COLORS.labelColor;\n      ctx.font = '11px system-ui, -apple-system, sans-serif';\n      ctx.fillText('Max', width - margin.right, height - margin.bottom + 15);\n      ctx.fillStyle = CHART_COLORS.textColor;\n      ctx.font = 'bold 12px system-ui, -apple-system, sans-serif';\n      ctx.fillText(formatMoney(maxPrice), width - margin.right, height - margin.bottom + 30);\n      \n      // FMV marker\n      if (marketValue && marketValue >= minPrice && marketValue <= maxPrice) {\n        const fmvX = xScale(marketValue);\n        \n        ctx.beginPath();\n        ctx.moveTo(fmvX, height - margin.bottom);\n        ctx.lineTo(fmvX, height - margin.bottom + 5);\n        ctx.strokeStyle = CHART_COLORS.warning;\n        ctx.lineWidth = 2;\n        ctx.stroke();\n        \n        ctx.fillStyle = CHART_COLORS.labelColor;\n        ctx.font = '11px system-ui, -apple-system, sans-serif';\n        ctx.textAlign = 'center';\n        ctx.fillText('FMV', fmvX, height - margin.bottom + 15);\n        ctx.fillStyle = CHART_COLORS.warning;\n        ctx.font = 'bold 12px system-ui, -apple-system, sans-serif';\n        ctx.fillText(formatMoney(marketValue), fmvX, height - margin.bottom + 30);\n      }\n    } else {\n      ctx.fillText(formatMoney(minPrice), width / 2, height - margin.bottom + 20);\n      ctx.fillText('(All prices identical)', width / 2, height - margin.bottom + 35);\n    }\n    \n    // Draw legend\n    const legendY = height - 15;\n    const legendText = 'FMV Range';\n    ctx.font = '11px system-ui, -apple-system, sans-serif';\n    const textWidth = ctx.measureText(legendText).width;\n    const rectWidth = 30;\n    const spacing = 5;\n    const totalLegendWidth = rectWidth + spacing + textWidth;\n    const legendX = (width - totalLegendWidth) / 2;\n    \n    // Legend color box\n    const legendGradient = ctx.createLinearGradient(legendX, legendY - 8, legendX + rectWidth, legendY - 8);\n    legendGradient.addColorStop(0, 'rgba(52, 199, 89, 0.3)');\n    legendGradient.addColorStop(1, 'rgba(52, 199, 89, 0.5)');\n    ctx.fillStyle = legendGradient;\n    ctx.fillRect(legendX, legendY - 12, rectWidth, 12);\n    ctx.strokeStyle = 'rgba(52, 199, 89, 0.8)';\n    ctx.lineWidth = 1;\n    ctx.strokeRect(legendX, legendY - 12, rectWidth, 12);\n    \n    // Legend text\n    ctx.fillStyle = CHART_COLORS.textColor;\n    ctx.textAlign = 'left';\n    ctx.fillText(legendText, legendX + rectWidth + spacing, legendY - 3);\n    \n    // Draw crosshair if active\n    if (crosshairX !== null && crosshairX >= margin.left && crosshairX <= width - margin.right) {\n      const relativeX = crosshairX - margin.left;\n      const price = minPrice + (relativeX / innerWidth) * priceRange;\n      \n      // Crosshair line\n      ctx.strokeStyle = CHART_COLORS.crosshairColor;\n      ctx.lineWidth = 2;\n      ctx.setLineDash([5, 5]);\n      ctx.beginPath();\n      ctx.moveTo(crosshairX, margin.top);\n      ctx.lineTo(crosshairX, height - margin.bottom);\n      ctx.stroke();\n      ctx.setLineDash([]);\n      \n      // Price tooltip\n      drawTooltip(ctx, formatMoney(price), crosshairX, margin.top - 5);\n    }\n    \n    // Store metadata for interactions\n    canvas.dataset.minPrice = minPrice;\n    canvas.dataset.maxPrice = maxPrice;\n    canvas.dataset.marginLeft = margin.left;\n    canvas.dataset.marginRight = margin.right;\n    canvas.dataset.innerWidth = innerWidth;\n    \n  }, [dimensions, prices, fmv, crosshairX]);\n  \n  // Draw chart when data or dimensions change\n  useEffect(() => {\n    drawChart();\n  }, [drawChart]);\n  \n  // Handle mouse/touch interactions\n  const handleInteraction = useCallback((clientX) => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n    \n    const rect = canvas.getBoundingClientRect();\n    const x = clientX - rect.left;\n    const marginLeft = parseFloat(canvas.dataset.marginLeft) || DEFAULT_MARGINS.left;\n    const marginRight = parseFloat(canvas.dataset.marginRight) || DEFAULT_MARGINS.right;\n    \n    if (x >= marginLeft && x <= canvas.width - marginRight) {\n      setCrosshairX(x);\n    }\n  }, []);\n  \n  const handleMouseMove = useCallback((e) => {\n    handleInteraction(e.clientX);\n  }, [handleInteraction]);\n  \n  const handleTouchMove = useCallback((e) => {\n    e.preventDefault();\n    if (e.touches.length > 0) {\n      handleInteraction(e.touches[0].clientX);\n    }\n  }, [handleInteraction]);\n  \n  const handleMouseLeave = useCallback(() => {\n    setCrosshairX(null);\n  }, []);\n  \n  const handleClick = useCallback((e) => {\n    // Toggle crosshair persistence\n    handleInteraction(e.clientX);\n  }, [handleInteraction]);\n  \n  return (\n    <div className=\"chart-canvas-wrapper\" ref={containerRef}>\n      <canvas\n        ref={canvasRef}\n        className=\"chart-canvas\"\n        style={{ cursor: 'crosshair' }}\n        onMouseMove={handleMouseMove}\n        onMouseLeave={handleMouseLeave}\n        onClick={handleClick}\n        onTouchMove={handleTouchMove}\n      />\n    </div>\n  );\n};\n\nexport default BeeswarmChart;\n","/**\n * VolumeProfileChart - Canvas-based volume profile (histogram) chart\n * Shows price distribution with horizontal bars for sold vs active listings\n * Includes FMV markers and interactive crosshair\n */\nimport { useRef, useEffect, useCallback, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport useSearchStore from '../../stores/searchStore';\nimport {\n  formatMoney,\n  filterOutliers,\n  calculateBins,\n  drawTooltip,\n  CHART_COLORS\n} from '../../utils/chartUtils';\n\nconst VolumeProfileChart = ({ defaultBins = 25 }) => {\n  const canvasRef = useRef(null);\n  const containerRef = useRef(null);\n  const [crosshairX, setCrosshairX] = useState(null);\n  const [numBins, setNumBins] = useState(defaultBins);\n  const [dimensions, setDimensions] = useState({ width: 0, height: 300 });\n  \n  // Get data from search store (using actual store property names)\n  const soldListings = useSearchStore((state) => state.soldListings);\n  const activeListings = useSearchStore((state) => state.activeListings);\n  const fmv = useSearchStore((state) => state.fmv);\n  \n  // Set up resize observer\n  useEffect(() => {\n    if (!containerRef.current) return;\n    \n    const resizeObserver = new ResizeObserver(entries => {\n      for (const entry of entries) {\n        const { width } = entry.contentRect;\n        if (width > 0) {\n          setDimensions(prev => ({ ...prev, width }));\n        }\n      }\n    });\n    \n    resizeObserver.observe(containerRef.current);\n    \n    // Initial measurement\n    const initialWidth = containerRef.current.offsetWidth;\n    if (initialWidth > 0) {\n      setDimensions(prev => ({ ...prev, width: initialWidth }));\n    }\n    \n    return () => resizeObserver.disconnect();\n  }, []);\n  \n  // Adjust mobile defaults\n  useEffect(() => {\n    const isMobile = window.innerWidth < 768;\n    if (isMobile && numBins === defaultBins) {\n      setNumBins(10);\n    }\n  }, [defaultBins, numBins]);\n  \n  // Draw the chart\n  const drawChart = useCallback(() => {\n    const canvas = canvasRef.current;\n    if (!canvas || dimensions.width === 0) return;\n    \n    const ctx = canvas.getContext('2d');\n    const { width, height } = dimensions;\n    const margin = { top: 40, right: 40, bottom: 60, left: 60 };\n    const innerWidth = width - margin.left - margin.right;\n    const innerHeight = height - margin.top - margin.bottom;\n    \n    // Set canvas size\n    canvas.width = width;\n    canvas.height = height;\n    \n    // Clear and draw background\n    ctx.clearRect(0, 0, width, height);\n    ctx.fillStyle = '#f8f9fa';\n    ctx.fillRect(0, 0, width, height);\n    \n    // Extract and filter sold prices\n    let soldPrices = soldListings?.map(item => item.total_price).filter(p => p > 0) || [];\n    \n    // Extract and filter active prices (Buy It Now only)\n    let activePrices = activeListings?.filter(item => {\n      const buyingFormat = (item.buying_format || '').toLowerCase();\n      return buyingFormat.includes('buy it now');\n    }).map(item => {\n      return item.total_price ?? ((item.extracted_price || 0) + (item.extracted_shipping || 0));\n    }).filter(p => p > 0) || [];\n    \n    // Show empty state if no data\n    if (soldPrices.length === 0 && activePrices.length === 0) {\n      ctx.fillStyle = CHART_COLORS.textColor;\n      ctx.font = 'bold 16px system-ui, -apple-system, sans-serif';\n      ctx.textAlign = 'center';\n      ctx.fillText('No data available for price distribution', width / 2, height / 2);\n      ctx.font = '14px system-ui, -apple-system, sans-serif';\n      ctx.fillStyle = CHART_COLORS.labelColor;\n      ctx.fillText('Run a search to see results', width / 2, height / 2 + 25);\n      return;\n    }\n    \n    // Filter outliers\n    if (soldPrices.length >= 4) {\n      soldPrices = filterOutliers(soldPrices);\n    }\n    if (activePrices.length >= 4) {\n      activePrices = filterOutliers(activePrices);\n    }\n    \n    // Find global min/max\n    const allPrices = [...soldPrices, ...activePrices];\n    const minPrice = Math.min(...allPrices);\n    const maxPrice = Math.max(...allPrices);\n    const priceRange = maxPrice - minPrice;\n    \n    // Calculate bins\n    const soldBins = calculateBins(soldPrices, numBins, minPrice, maxPrice);\n    const activeBins = calculateBins(activePrices, numBins, minPrice, maxPrice);\n    \n    // Find max count for scaling\n    const maxCount = Math.max(...soldBins, ...activeBins, 1);\n    \n    // Draw Y-axis\n    ctx.strokeStyle = CHART_COLORS.axisColor;\n    ctx.lineWidth = 2;\n    ctx.beginPath();\n    ctx.moveTo(margin.left, margin.top);\n    ctx.lineTo(margin.left, height - margin.bottom);\n    ctx.stroke();\n    \n    // Draw X-axis\n    ctx.beginPath();\n    ctx.moveTo(margin.left, height - margin.bottom);\n    ctx.lineTo(width - margin.right, height - margin.bottom);\n    ctx.stroke();\n    \n    // Y-axis label\n    ctx.save();\n    ctx.translate(20, height / 2);\n    ctx.rotate(-Math.PI / 2);\n    ctx.fillStyle = CHART_COLORS.textColor;\n    ctx.font = 'bold 14px system-ui, -apple-system, sans-serif';\n    ctx.textAlign = 'center';\n    ctx.fillText('Number of Sales/Listings', 0, 0);\n    ctx.restore();\n    \n    // X-axis label\n    ctx.fillStyle = CHART_COLORS.textColor;\n    ctx.font = 'bold 14px system-ui, -apple-system, sans-serif';\n    ctx.textAlign = 'center';\n    ctx.fillText('Price', width / 2, height - 10);\n    \n    // Y-axis ticks and grid lines\n    const yTicks = 5;\n    ctx.fillStyle = CHART_COLORS.labelColor;\n    ctx.font = '11px system-ui, -apple-system, sans-serif';\n    ctx.textAlign = 'right';\n    \n    for (let i = 0; i <= yTicks; i++) {\n      const y = height - margin.bottom - (i / yTicks) * innerHeight;\n      const value = Math.round((i / yTicks) * maxCount);\n      \n      // Grid line\n      ctx.strokeStyle = CHART_COLORS.gridColor;\n      ctx.lineWidth = 1;\n      ctx.beginPath();\n      ctx.moveTo(margin.left, y);\n      ctx.lineTo(width - margin.right, y);\n      ctx.stroke();\n      \n      // Label\n      ctx.fillStyle = CHART_COLORS.labelColor;\n      ctx.fillText(value.toString(), margin.left - 10, y + 4);\n    }\n    \n    // Calculate bar dimensions\n    const barAreaWidth = innerWidth / numBins;\n    const barWidth = barAreaWidth * 0.8;\n    const barOffset = barAreaWidth * 0.1;\n    \n    // Draw bars\n    for (let i = 0; i < numBins; i++) {\n      const x = margin.left + (i * barAreaWidth) + barOffset;\n      \n      // Sold bars (blue) - behind\n      if (soldBins[i] > 0) {\n        const barHeight = (soldBins[i] / maxCount) * innerHeight;\n        const y = height - margin.bottom - barHeight;\n        \n        ctx.fillStyle = CHART_COLORS.soldBlue;\n        ctx.fillRect(x, y, barWidth, barHeight);\n        \n        ctx.strokeStyle = CHART_COLORS.soldBlueBorder;\n        ctx.lineWidth = 2;\n        ctx.strokeRect(x, y, barWidth, barHeight);\n      }\n      \n      // Active bars (red) - front with offset\n      if (activeBins[i] > 0) {\n        const barHeight = (activeBins[i] / maxCount) * innerHeight;\n        const y = height - margin.bottom - barHeight;\n        const offsetX = barWidth * 0.15;\n        \n        ctx.fillStyle = CHART_COLORS.activeRed;\n        ctx.fillRect(x + offsetX, y, barWidth, barHeight);\n        \n        ctx.strokeStyle = CHART_COLORS.activeRedBorder;\n        ctx.lineWidth = 2;\n        ctx.strokeRect(x + offsetX, y, barWidth, barHeight);\n      }\n    }\n    \n    // Draw FMV markers if available\n    const marketValue = fmv?.market_value || fmv?.expected_high;\n    if (marketValue && priceRange > 0) {\n      const fmvX = margin.left + ((marketValue - minPrice) / priceRange) * innerWidth;\n      \n      ctx.strokeStyle = CHART_COLORS.warning;\n      ctx.lineWidth = 2;\n      ctx.setLineDash([8, 4]);\n      ctx.beginPath();\n      ctx.moveTo(fmvX, margin.top);\n      ctx.lineTo(fmvX, height - margin.bottom);\n      ctx.stroke();\n      ctx.setLineDash([]);\n      \n      // FMV label at bottom\n      ctx.fillStyle = CHART_COLORS.warning;\n      ctx.font = 'bold 11px system-ui, -apple-system, sans-serif';\n      ctx.textAlign = 'center';\n      ctx.fillText('FMV', fmvX, height - margin.bottom + 15);\n      ctx.fillText(formatMoney(marketValue), fmvX, height - margin.bottom + 28);\n    }\n    \n    // Draw crosshair if active\n    if (crosshairX !== null && crosshairX >= margin.left && crosshairX <= width - margin.right) {\n      const relativeX = crosshairX - margin.left;\n      const price = minPrice + (relativeX / innerWidth) * priceRange;\n      \n      // Crosshair line\n      ctx.strokeStyle = CHART_COLORS.crosshairColor;\n      ctx.lineWidth = 2;\n      ctx.setLineDash([5, 5]);\n      ctx.beginPath();\n      ctx.moveTo(crosshairX, margin.top);\n      ctx.lineTo(crosshairX, height - margin.bottom);\n      ctx.stroke();\n      ctx.setLineDash([]);\n      \n      // Price tooltip\n      drawTooltip(ctx, formatMoney(price), crosshairX, margin.top - 5);\n    }\n    \n    // Store metadata for interactions\n    canvas.dataset.minPrice = minPrice;\n    canvas.dataset.maxPrice = maxPrice;\n    canvas.dataset.marginLeft = margin.left;\n    canvas.dataset.marginRight = margin.right;\n    canvas.dataset.innerWidth = innerWidth;\n    \n  }, [dimensions, soldListings, activeListings, fmv, numBins, crosshairX]);\n  \n  // Draw chart when data or dimensions change\n  useEffect(() => {\n    drawChart();\n  }, [drawChart]);\n  \n  // Handle interactions\n  const handleInteraction = useCallback((clientX) => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n    \n    const rect = canvas.getBoundingClientRect();\n    const x = clientX - rect.left;\n    const marginLeft = parseFloat(canvas.dataset.marginLeft) || 60;\n    const marginRight = parseFloat(canvas.dataset.marginRight) || 40;\n    \n    if (x >= marginLeft && x <= canvas.width - marginRight) {\n      setCrosshairX(x);\n    }\n  }, []);\n  \n  const handleMouseMove = useCallback((e) => {\n    handleInteraction(e.clientX);\n  }, [handleInteraction]);\n  \n  const handleTouchMove = useCallback((e) => {\n    e.preventDefault();\n    if (e.touches.length > 0) {\n      handleInteraction(e.touches[0].clientX);\n    }\n  }, [handleInteraction]);\n  \n  const handleMouseLeave = useCallback(() => {\n    setCrosshairX(null);\n  }, []);\n  \n  // Bin adjustment handlers\n  const adjustBins = useCallback((delta) => {\n    setNumBins(prev => {\n      const newValue = prev + delta;\n      return Math.min(50, Math.max(5, newValue));\n    });\n  }, []);\n  \n  const resetBins = useCallback(() => {\n    const isMobile = window.innerWidth < 768;\n    setNumBins(isMobile ? 10 : defaultBins);\n  }, [defaultBins]);\n  \n  return (\n    <div className=\"volume-profile-chart\">\n      {/* Bin controls */}\n      <div className=\"chart-controls\">\n        <span className=\"chart-controls-label\">Bars:</span>\n        <button \n          className=\"chart-control-btn\"\n          onClick={() => adjustBins(-5)}\n          aria-label=\"Decrease bins\"\n        >\n          ‚àí\n        </button>\n        <span className=\"chart-bin-count\">{numBins}</span>\n        <button \n          className=\"chart-control-btn\"\n          onClick={() => adjustBins(5)}\n          aria-label=\"Increase bins\"\n        >\n          +\n        </button>\n        <button \n          className=\"chart-control-btn chart-control-reset\"\n          onClick={resetBins}\n        >\n          Reset\n        </button>\n      </div>\n      \n      {/* Canvas wrapper */}\n      <div className=\"chart-canvas-wrapper\" ref={containerRef}>\n        <canvas\n          ref={canvasRef}\n          className=\"chart-canvas\"\n          style={{ cursor: 'crosshair' }}\n          onMouseMove={handleMouseMove}\n          onMouseLeave={handleMouseLeave}\n          onTouchMove={handleTouchMove}\n        />\n      </div>\n      \n      {/* Legend */}\n      <div className=\"chart-legend\">\n        <div className=\"chart-legend-item\">\n          <div \n            className=\"chart-legend-color\" \n            style={{ \n              background: CHART_COLORS.soldBlue,\n              borderColor: CHART_COLORS.soldBlueBorder \n            }} \n          />\n          <span>Sold Listings</span>\n        </div>\n        <div className=\"chart-legend-item\">\n          <div \n            className=\"chart-legend-color\" \n            style={{ \n              background: CHART_COLORS.activeRed,\n              borderColor: CHART_COLORS.activeRedBorder \n            }} \n          />\n          <span>Active Listings</span>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nVolumeProfileChart.propTypes = {\n  defaultBins: PropTypes.number\n};\n\nexport default VolumeProfileChart;\n","import PropTypes from 'prop-types';\nimport { useState } from 'react';\n\n/**\n * MarketIndicatorCard - Reusable card for displaying a market metric\n * \n * Features:\n * - Title, value, progress bar\n * - Color-coded by band (green/yellow/red)\n * - Info button with tooltip/modal explanation\n * \n * @param {string} title - Card title\n * @param {number|null} value - Metric value (0-100 for most, can be negative for pressure)\n * @param {string} unit - Unit to display after value (e.g., '%', '/100')\n * @param {Object} band - Band info from getMetricBand { color, bgColor, label, description, icon }\n * @param {number} min - Minimum value for progress bar (default 0)\n * @param {number} max - Maximum value for progress bar (default 100)\n * @param {string} subtitle - Optional subtitle text\n * @param {boolean} loading - Show loading state\n */\nfunction MarketIndicatorCard({\n  title,\n  value,\n  unit = '',\n  band,\n  min = 0,\n  max = 100,\n  subtitle,\n  loading = false,\n  infoContent\n}) {\n  const [showInfo, setShowInfo] = useState(false);\n\n  // Calculate progress percentage (clamped to 0-100)\n  const progressValue = value !== null ? Math.max(min, Math.min(max, value)) : 0;\n  const progressPercent = ((progressValue - min) / (max - min)) * 100;\n\n  // Format display value\n  const displayValue = value !== null \n    ? (Number.isInteger(value) ? value : value.toFixed(1))\n    : '--';\n\n  if (loading) {\n    return (\n      <div className=\"indicator-card indicator-card-loading\">\n        <div className=\"indicator-card-header\">\n          <span className=\"indicator-card-title\">{title}</span>\n        </div>\n        <div className=\"indicator-card-body\">\n          <div className=\"indicator-value-skeleton\"></div>\n          <div className=\"indicator-bar-skeleton\"></div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div \n      className=\"indicator-card\"\n      style={{ '--indicator-color': band?.color || 'var(--subtle-text-color)' }}\n    >\n      <div className=\"indicator-card-header\">\n        <span className=\"indicator-card-title\">{title}</span>\n        {infoContent && (\n          <button \n            className=\"indicator-info-btn\"\n            onClick={() => setShowInfo(!showInfo)}\n            title=\"More information\"\n            aria-label={`Info about ${title}`}\n          >\n            ‚ÑπÔ∏è\n          </button>\n        )}\n      </div>\n\n      <div className=\"indicator-card-body\">\n        <div className=\"indicator-value-row\">\n          <span className=\"indicator-icon\">{band?.icon || 'üìä'}</span>\n          <span \n            className=\"indicator-value\"\n            style={{ color: band?.color }}\n          >\n            {displayValue}{unit}\n          </span>\n          <span \n            className=\"indicator-band-label\"\n            style={{ \n              color: band?.color,\n              backgroundColor: band?.bgColor\n            }}\n          >\n            {band?.label || 'N/A'}\n          </span>\n        </div>\n\n        {/* Progress Bar */}\n        <div className=\"indicator-progress-container\">\n          <div \n            className=\"indicator-progress-bar\"\n            style={{ \n              width: `${Math.max(0, progressPercent)}%`,\n              backgroundColor: band?.color || 'var(--primary-blue)'\n            }}\n          />\n        </div>\n\n        {/* Subtitle / Description */}\n        {subtitle && (\n          <div className=\"indicator-subtitle\">{subtitle}</div>\n        )}\n      </div>\n\n      {/* Info Tooltip/Panel */}\n      {showInfo && infoContent && (\n        <div className=\"indicator-info-panel\">\n          <div className=\"indicator-info-content\">\n            <p className=\"indicator-info-description\">{band?.description}</p>\n            {infoContent}\n          </div>\n          <button \n            className=\"indicator-info-close\"\n            onClick={() => setShowInfo(false)}\n          >\n            ‚úï\n          </button>\n        </div>\n      )}\n    </div>\n  );\n}\n\nMarketIndicatorCard.propTypes = {\n  title: PropTypes.string.isRequired,\n  value: PropTypes.number,\n  unit: PropTypes.string,\n  band: PropTypes.shape({\n    color: PropTypes.string,\n    bgColor: PropTypes.string,\n    label: PropTypes.string,\n    description: PropTypes.string,\n    icon: PropTypes.string\n  }),\n  min: PropTypes.number,\n  max: PropTypes.number,\n  subtitle: PropTypes.string,\n  loading: PropTypes.bool,\n  infoContent: PropTypes.node\n};\n\nexport default MarketIndicatorCard;\n","import PropTypes from 'prop-types';\nimport MarketIndicatorCard from './MarketIndicatorCard';\nimport { getMetricBand } from '../../utils/marketAnalysisUtils';\nimport { formatMoney } from '../../utils/searchUtils';\n\n/**\n * MarketPressureCard - Shows market pressure with visual indicator\n * \n * Market Pressure measures how much sellers are asking above/below FMV\n * Formula: ((medianAskingPrice - FMV) / FMV) * 100\n * \n * Bands:\n * - Below FMV (negative): Sellers pricing below market - deals available\n * - Healthy (0-15%): Good alignment between asking and selling prices\n * - Optimistic (15-30%): Sellers slightly hopeful - room for negotiation\n * - Resistance (30-50%): Significant gap - hard to sell at asking prices\n * - Unrealistic (50%+): Sellers asking way above what market will bear\n * \n * @param {Object} pressure - { value, medianAsking } from calculateMarketPressure\n * @param {number} fmv - Fair market value for context\n * @param {boolean} loading - Loading state\n */\nfunction MarketPressureCard({ pressure, fmv, loading = false }) {\n  const value = pressure?.value ?? null;\n  const medianAsking = pressure?.medianAsking;\n  const band = getMetricBand('pressure', value);\n\n  // Build subtitle with context\n  let subtitle = '';\n  if (medianAsking && fmv) {\n    subtitle = `Median asking: ${formatMoney(medianAsking)} vs FMV: ${formatMoney(fmv)}`;\n  }\n\n  // Info content explaining the metric\n  const infoContent = (\n    <div className=\"indicator-info-details\">\n      <h4>How Market Pressure is Calculated</h4>\n      <p>\n        Market Pressure = ((Median Asking Price - FMV) / FMV) √ó 100\n      </p>\n      <h4>What It Means</h4>\n      <ul>\n        <li><strong>Negative:</strong> Sellers pricing below FMV - good buying opportunity</li>\n        <li><strong>0-15%:</strong> Healthy market - prices align with recent sales</li>\n        <li><strong>15-30%:</strong> Sellers optimistic - expect negotiation</li>\n        <li><strong>30-50%:</strong> Market resistance - many listings may not sell</li>\n        <li><strong>50%+:</strong> Unrealistic asks - wait for price drops</li>\n      </ul>\n      <h4>For Buyers</h4>\n      <p>\n        Lower pressure means better buying conditions. When pressure is high, \n        make offers below asking price or wait for sellers to reduce prices.\n      </p>\n      <h4>For Sellers</h4>\n      <p>\n        High market pressure indicates your competition is pricing too high. \n        Price competitively near FMV for faster sales.\n      </p>\n    </div>\n  );\n\n  return (\n    <MarketIndicatorCard\n      title=\"Market Pressure\"\n      value={value}\n      unit=\"%\"\n      band={band}\n      min={-50}\n      max={100}\n      subtitle={subtitle}\n      loading={loading}\n      infoContent={infoContent}\n    />\n  );\n}\n\nMarketPressureCard.propTypes = {\n  pressure: PropTypes.shape({\n    value: PropTypes.number,\n    medianAsking: PropTypes.number\n  }),\n  fmv: PropTypes.number,\n  loading: PropTypes.bool\n};\n\nexport default MarketPressureCard;\n","import PropTypes from 'prop-types';\nimport MarketIndicatorCard from './MarketIndicatorCard';\nimport { getMetricBand } from '../../utils/marketAnalysisUtils';\nimport { formatMoney } from '../../utils/searchUtils';\n\n/**\n * MarketConfidenceCard - Shows market confidence score\n * \n * Market Confidence measures how consistent sold prices are.\n * Higher score = more consistent prices = more reliable FMV\n * \n * Formula: 100 / (1 + coefficientOfVariation / 100)\n * \n * Bands:\n * - High (80-100): Very consistent - FMV is reliable\n * - Good (60-80): Reasonably consistent\n * - Moderate (40-60): Some variance - FMV is estimate\n * - Low (20-40): High variance - use caution\n * - Very Low (0-20): Wide variance - FMV unreliable\n * \n * @param {Object} confidence - { value, stdDev, mean } from calculateMarketConfidence\n * @param {number} soldCount - Number of sold listings for context\n * @param {boolean} loading - Loading state\n */\nfunction MarketConfidenceCard({ confidence, soldCount, loading = false }) {\n  const value = confidence?.value ?? null;\n  const stdDev = confidence?.stdDev;\n  const mean = confidence?.mean;\n  const band = getMetricBand('confidence', value);\n\n  // Build subtitle with context\n  let subtitle = '';\n  if (mean && stdDev !== null && stdDev !== undefined) {\n    subtitle = `Avg: ${formatMoney(mean)} ¬± ${formatMoney(stdDev)} (${soldCount || 0} sales)`;\n  } else if (soldCount) {\n    subtitle = `Based on ${soldCount} sales`;\n  }\n\n  // Info content explaining the metric\n  const infoContent = (\n    <div className=\"indicator-info-details\">\n      <h4>How Market Confidence is Calculated</h4>\n      <p>\n        Confidence = 100 / (1 + Coefficient of Variation / 100)\n      </p>\n      <p>\n        The Coefficient of Variation (CV) measures price spread relative to the average.\n        Lower CV = more consistent prices = higher confidence.\n      </p>\n      <h4>What It Means</h4>\n      <ul>\n        <li><strong>80-100:</strong> Highly consistent - FMV is very reliable</li>\n        <li><strong>60-80:</strong> Good consistency - FMV is solid estimate</li>\n        <li><strong>40-60:</strong> Moderate - consider the price range</li>\n        <li><strong>20-40:</strong> Low - prices vary significantly</li>\n        <li><strong>0-20:</strong> Very low - wide price swings, FMV unreliable</li>\n      </ul>\n      <h4>Why It Matters</h4>\n      <p>\n        High confidence means you can trust the FMV estimate. Low confidence suggests \n        the market hasn&apos;t agreed on a price - you might find bargains or overpay.\n      </p>\n      <h4>Improving Confidence</h4>\n      <p>\n        Try refining your search with more specific terms (e.g., add year, variation, \n        or condition) to get more comparable sales.\n      </p>\n    </div>\n  );\n\n  return (\n    <MarketIndicatorCard\n      title=\"Market Confidence\"\n      value={value}\n      unit=\"/100\"\n      band={band}\n      min={0}\n      max={100}\n      subtitle={subtitle}\n      loading={loading}\n      infoContent={infoContent}\n    />\n  );\n}\n\nMarketConfidenceCard.propTypes = {\n  confidence: PropTypes.shape({\n    value: PropTypes.number,\n    stdDev: PropTypes.number,\n    mean: PropTypes.number\n  }),\n  soldCount: PropTypes.number,\n  loading: PropTypes.bool\n};\n\nexport default MarketConfidenceCard;\n","import PropTypes from 'prop-types';\nimport MarketIndicatorCard from './MarketIndicatorCard';\nimport { getMetricBand } from '../../utils/marketAnalysisUtils';\n\n/**\n * LiquidityScoreCard - Shows liquidity/absorption score\n * \n * Liquidity measures how quickly cards are selling relative to supply.\n * Based on absorption ratio: completedSales / activeListings\n * \n * Bands:\n * - High (ratio ‚â• 1.0): More sales than active - hot market\n * - Moderate (0.5-1.0): Balanced market activity\n * - Low (0.2-0.5): More supply than demand\n * - Very Low (<0.2): Oversupplied - slow sales expected\n * \n * @param {Object} liquidity - { value, ratio, band } from calculateLiquidityScore\n * @param {number} soldCount - Number of sold listings\n * @param {number} activeCount - Number of active listings\n * @param {boolean} loading - Loading state\n */\nfunction LiquidityScoreCard({ liquidity, soldCount, activeCount, loading = false }) {\n  const value = liquidity?.value ?? null;\n  const ratio = liquidity?.ratio;\n  const band = getMetricBand('liquidity', value);\n\n  // Build subtitle with sold:active ratio\n  let subtitle = '';\n  if (soldCount !== null && activeCount !== null) {\n    const ratioDisplay = ratio !== null ? ratio.toFixed(2) : '--';\n    subtitle = `${soldCount} sold : ${activeCount} active (${ratioDisplay}x)`;\n  }\n\n  // Info content explaining the metric\n  const infoContent = (\n    <div className=\"indicator-info-details\">\n      <h4>How Liquidity is Calculated</h4>\n      <p>\n        Absorption Ratio = Recent Sales / Active Listings\n      </p>\n      <p>\n        The score converts this ratio to a 0-100 scale where higher means \n        faster-moving market.\n      </p>\n      <h4>What the Ratio Means</h4>\n      <ul>\n        <li><strong>‚â• 1.0:</strong> More sales than listings - high demand</li>\n        <li><strong>0.5 - 1.0:</strong> Balanced - healthy turnover</li>\n        <li><strong>0.2 - 0.5:</strong> Low - supply exceeds demand</li>\n        <li><strong>&lt; 0.2:</strong> Very low - oversupplied market</li>\n      </ul>\n      <h4>For Buyers</h4>\n      <p>\n        Low liquidity means more negotiating power and less urgency. \n        High liquidity means act fast on good deals.\n      </p>\n      <h4>For Sellers</h4>\n      <p>\n        High liquidity = price confidently, cards move quickly.\n        Low liquidity = price competitively and be patient.\n      </p>\n      <h4>For Flippers</h4>\n      <p>\n        High liquidity is ideal - you can buy and resell quickly.\n        Low liquidity means capital tied up longer.\n      </p>\n    </div>\n  );\n\n  return (\n    <MarketIndicatorCard\n      title=\"Liquidity Score\"\n      value={value}\n      unit=\"/100\"\n      band={band}\n      min={0}\n      max={100}\n      subtitle={subtitle}\n      loading={loading}\n      infoContent={infoContent}\n    />\n  );\n}\n\nLiquidityScoreCard.propTypes = {\n  liquidity: PropTypes.shape({\n    value: PropTypes.number,\n    ratio: PropTypes.number,\n    band: PropTypes.string\n  }),\n  soldCount: PropTypes.number,\n  activeCount: PropTypes.number,\n  loading: PropTypes.bool\n};\n\nexport default LiquidityScoreCard;\n","import PropTypes from 'prop-types';\n\n/**\n * MarketAssessment - Shows tier-based market assessment message\n * \n * Displays:\n * - Tier badge with color\n * - Overall assessment message\n * - Persona-specific advice (collector, seller, flipper)\n * \n * @param {Object} tier - { tier, label, color, bgColor, icon, description }\n * @param {Object} advice - { collector, seller, flipper } persona advice\n * @param {Object} marketMessage - Optional API response from /market-message\n * @param {boolean} loading - Loading state\n */\nfunction MarketAssessment({ tier, advice, marketMessage, loading = false }) {\n  if (loading) {\n    return (\n      <div className=\"market-assessment market-assessment-loading\">\n        <div className=\"assessment-header\">\n          <div className=\"assessment-badge-skeleton\"></div>\n          <div className=\"assessment-title-skeleton\"></div>\n        </div>\n        <div className=\"assessment-body-skeleton\"></div>\n      </div>\n    );\n  }\n\n  if (!tier) {\n    return (\n      <div className=\"market-assessment market-assessment-empty\">\n        <div className=\"assessment-header\">\n          <span className=\"assessment-icon\">üìä</span>\n          <h3 className=\"assessment-title\">Market Assessment</h3>\n        </div>\n        <p className=\"assessment-empty-text\">\n          Run a search to see market assessment\n        </p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"market-assessment\">\n      {/* Header with tier badge */}\n      <div className=\"assessment-header\">\n        <span \n          className=\"tier-badge\"\n          style={{ \n            color: tier.color,\n            backgroundColor: tier.bgColor,\n            borderColor: tier.color\n          }}\n        >\n          <span className=\"tier-icon\">{tier.icon}</span>\n          <span className=\"tier-label\">{tier.label}</span>\n          <span className=\"tier-number\">Tier {tier.tier}</span>\n        </span>\n        <h3 className=\"assessment-title\">Market Assessment</h3>\n      </div>\n\n      {/* Main description */}\n      <div className=\"assessment-description\">\n        <p>{tier.description}</p>\n        {marketMessage?.message && (\n          <p className=\"assessment-api-message\">{marketMessage.message}</p>\n        )}\n      </div>\n\n      {/* Persona advice sections */}\n      {advice && (\n        <div className=\"advice-sections\">\n          {advice.collector && (\n            <div className=\"advice-section advice-collector\">\n              <div className=\"advice-header\">\n                <span className=\"advice-icon\">üéØ</span>\n                <span className=\"advice-label\">For Collectors</span>\n              </div>\n              <p className=\"advice-text\">{advice.collector}</p>\n            </div>\n          )}\n\n          {advice.seller && (\n            <div className=\"advice-section advice-seller\">\n              <div className=\"advice-header\">\n                <span className=\"advice-icon\">üí∞</span>\n                <span className=\"advice-label\">For Sellers</span>\n              </div>\n              <p className=\"advice-text\">{advice.seller}</p>\n            </div>\n          )}\n\n          {advice.flipper && (\n            <div className=\"advice-section advice-flipper\">\n              <div className=\"advice-header\">\n                <span className=\"advice-icon\">üìà</span>\n                <span className=\"advice-label\">For Flippers</span>\n              </div>\n              <p className=\"advice-text\">{advice.flipper}</p>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* API-provided recommendations if available */}\n      {marketMessage?.recommendations && (\n        <div className=\"api-recommendations\">\n          <h4>Additional Insights</h4>\n          <ul>\n            {marketMessage.recommendations.map((rec, index) => (\n              <li key={index}>{rec}</li>\n            ))}\n          </ul>\n        </div>\n      )}\n    </div>\n  );\n}\n\nMarketAssessment.propTypes = {\n  tier: PropTypes.shape({\n    tier: PropTypes.number,\n    label: PropTypes.string,\n    color: PropTypes.string,\n    bgColor: PropTypes.string,\n    icon: PropTypes.string,\n    description: PropTypes.string\n  }),\n  advice: PropTypes.shape({\n    collector: PropTypes.string,\n    seller: PropTypes.string,\n    flipper: PropTypes.string\n  }),\n  marketMessage: PropTypes.shape({\n    message: PropTypes.string,\n    recommendations: PropTypes.arrayOf(PropTypes.string)\n  }),\n  loading: PropTypes.bool\n};\n\nexport default MarketAssessment;\n","import PropTypes from 'prop-types';\nimport { formatMoney } from '../../utils/searchUtils';\n\n/**\n * PricingRecommendations - Shows pricing recommendations\n * \n * Displays:\n * - Quick Sale price (for fast turnaround)\n * - Target/FMV price (fair market value)\n * - Patient Sale price (maximize value)\n * - Visual range indicator showing the spread\n * \n * @param {Object} recommendations - { quickSale, target, patientSale, rangeMin, rangeMax, quickDiscount, patientPremium }\n * @param {number} fmv - Fair market value for reference\n * @param {boolean} loading - Loading state\n */\nfunction PricingRecommendations({ recommendations, fmv, loading = false }) {\n  if (loading) {\n    return (\n      <div className=\"pricing-recommendations pricing-loading\">\n        <h3 className=\"pricing-title\">Pricing Recommendations</h3>\n        <div className=\"pricing-skeleton\">\n          <div className=\"pricing-item-skeleton\"></div>\n          <div className=\"pricing-item-skeleton\"></div>\n          <div className=\"pricing-item-skeleton\"></div>\n        </div>\n      </div>\n    );\n  }\n\n  if (!recommendations || !fmv) {\n    return (\n      <div className=\"pricing-recommendations pricing-empty\">\n        <h3 className=\"pricing-title\">Pricing Recommendations</h3>\n        <p className=\"pricing-empty-text\">\n          Pricing recommendations will appear after a search with valid FMV data.\n        </p>\n      </div>\n    );\n  }\n\n  const { quickSale, target, patientSale, quickDiscount, patientPremium } = recommendations;\n\n  // Calculate positions for the visual range indicator (as percentages)\n  // Use quick sale as 0% and patient sale as 100%\n  const range = patientSale - quickSale;\n  const targetPosition = range > 0 ? ((target - quickSale) / range) * 100 : 50;\n\n  return (\n    <div className=\"pricing-recommendations\">\n      <h3 className=\"pricing-title\">\n        <span className=\"pricing-icon\">üíµ</span>\n        Pricing Recommendations\n      </h3>\n\n      {/* Visual Price Range */}\n      <div className=\"pricing-range-visual\">\n        <div className=\"pricing-range-bar\">\n          {/* Quick sale marker */}\n          <div \n            className=\"pricing-marker pricing-marker-quick\"\n            style={{ left: '0%' }}\n          >\n            <div className=\"pricing-marker-line\"></div>\n            <div className=\"pricing-marker-dot\"></div>\n          </div>\n\n          {/* Target/FMV marker */}\n          <div \n            className=\"pricing-marker pricing-marker-target\"\n            style={{ left: `${targetPosition}%` }}\n          >\n            <div className=\"pricing-marker-line pricing-marker-line-target\"></div>\n            <div className=\"pricing-marker-dot pricing-marker-dot-target\"></div>\n          </div>\n\n          {/* Patient sale marker */}\n          <div \n            className=\"pricing-marker pricing-marker-patient\"\n            style={{ left: '100%' }}\n          >\n            <div className=\"pricing-marker-line\"></div>\n            <div className=\"pricing-marker-dot\"></div>\n          </div>\n\n          {/* Filled area representing the range */}\n          <div className=\"pricing-range-fill\"></div>\n        </div>\n\n        {/* Labels below the bar */}\n        <div className=\"pricing-range-labels\">\n          <span className=\"pricing-range-label pricing-range-label-quick\">Quick</span>\n          <span className=\"pricing-range-label pricing-range-label-target\">Target</span>\n          <span className=\"pricing-range-label pricing-range-label-patient\">Patient</span>\n        </div>\n      </div>\n\n      {/* Price Cards */}\n      <div className=\"pricing-cards\">\n        {/* Quick Sale */}\n        <div className=\"pricing-card pricing-card-quick\">\n          <div className=\"pricing-card-header\">\n            <span className=\"pricing-card-icon\">‚ö°</span>\n            <span className=\"pricing-card-label\">Quick Sale</span>\n          </div>\n          <div className=\"pricing-card-value\">\n            {formatMoney(quickSale)}\n          </div>\n          <div className=\"pricing-card-note\">\n            {quickDiscount}% below FMV\n          </div>\n          <div className=\"pricing-card-description\">\n            Price to sell within days. Best for moving inventory fast.\n          </div>\n        </div>\n\n        {/* Target / FMV */}\n        <div className=\"pricing-card pricing-card-target\">\n          <div className=\"pricing-card-header\">\n            <span className=\"pricing-card-icon\">üéØ</span>\n            <span className=\"pricing-card-label\">Target Price</span>\n          </div>\n          <div className=\"pricing-card-value pricing-card-value-main\">\n            {formatMoney(target)}\n          </div>\n          <div className=\"pricing-card-note\">\n            Fair Market Value\n          </div>\n          <div className=\"pricing-card-description\">\n            What comparable cards are actually selling for.\n          </div>\n        </div>\n\n        {/* Patient Sale */}\n        <div className=\"pricing-card pricing-card-patient\">\n          <div className=\"pricing-card-header\">\n            <span className=\"pricing-card-icon\">‚è≥</span>\n            <span className=\"pricing-card-label\">Patient Sale</span>\n          </div>\n          <div className=\"pricing-card-value\">\n            {formatMoney(patientSale)}\n          </div>\n          <div className=\"pricing-card-note\">\n            {patientPremium}% above FMV\n          </div>\n          <div className=\"pricing-card-description\">\n            For patient sellers. May take weeks to find the right buyer.\n          </div>\n        </div>\n      </div>\n\n      {/* Additional context */}\n      <div className=\"pricing-context\">\n        <p className=\"pricing-context-text\">\n          <strong>Tip:</strong> Prices adjust based on market conditions. \n          High liquidity markets support higher asks; oversupplied markets need competitive pricing.\n        </p>\n      </div>\n    </div>\n  );\n}\n\nPricingRecommendations.propTypes = {\n  recommendations: PropTypes.shape({\n    quickSale: PropTypes.number,\n    target: PropTypes.number,\n    patientSale: PropTypes.number,\n    rangeMin: PropTypes.number,\n    rangeMax: PropTypes.number,\n    quickDiscount: PropTypes.number,\n    patientPremium: PropTypes.number\n  }),\n  fmv: PropTypes.number,\n  loading: PropTypes.bool\n};\n\nexport default PricingRecommendations;\n","import { useEffect } from 'react';\nimport useSearchStore from '../../stores/searchStore';\nimport MarketPressureCard from './MarketPressureCard';\nimport MarketConfidenceCard from './MarketConfidenceCard';\nimport LiquidityScoreCard from './LiquidityScoreCard';\nimport MarketAssessment from './MarketAssessment';\nimport PricingRecommendations from './PricingRecommendations';\n\n/**\n * AnalysisDashboard - Container component that assembles all market analysis components\n * \n * Features:\n * - Grid layout for indicator cards\n * - Calculates metrics automatically when data changes\n * - Shows loading states during calculation\n * - Responsive design\n * \n * This component connects to the searchStore and automatically triggers\n * market analysis calculations when sold/active listings and FMV are available.\n */\nfunction AnalysisDashboard() {\n  // Get state and actions from store\n  const {\n    soldListings,\n    activeListings,\n    fmv,\n    marketMetrics,\n    marketTier,\n    marketAdvice,\n    pricingRecommendations,\n    marketMessage,\n    loadingMarketAnalysis,\n    loading,\n    loadingFmv,\n    loadingActive,\n    calculateMarketMetrics,\n    fetchMarketMessage,\n    hasResults\n  } = useSearchStore(state => ({\n    soldListings: state.soldListings,\n    activeListings: state.activeListings,\n    fmv: state.fmv,\n    marketMetrics: state.marketMetrics,\n    marketTier: state.marketTier,\n    marketAdvice: state.marketAdvice,\n    pricingRecommendations: state.pricingRecommendations,\n    marketMessage: state.marketMessage,\n    loadingMarketAnalysis: state.loadingMarketAnalysis,\n    loading: state.loading,\n    loadingFmv: state.loadingFmv,\n    loadingActive: state.loadingActive,\n    calculateMarketMetrics: state.calculateMarketMetrics,\n    fetchMarketMessage: state.fetchMarketMessage,\n    hasResults: state.hasResults()\n  }));\n\n  // Calculate metrics when data becomes available\n  useEffect(() => {\n    // Only calculate if we have sold listings and we're not in the middle of loading\n    if (\n      hasResults && \n      !loading && \n      !loadingFmv && \n      !loadingActive &&\n      !marketMetrics\n    ) {\n      console.log('[AnalysisDashboard] Triggering market metrics calculation');\n      calculateMarketMetrics();\n    }\n  }, [hasResults, loading, loadingFmv, loadingActive, marketMetrics, calculateMarketMetrics]);\n\n  // Fetch market message when tier is determined\n  useEffect(() => {\n    if (marketTier && fmv && !marketMessage) {\n      console.log('[AnalysisDashboard] Fetching market message');\n      fetchMarketMessage();\n    }\n  }, [marketTier, fmv, marketMessage, fetchMarketMessage]);\n\n  // Don't render if no results\n  if (!hasResults) {\n    return null;\n  }\n\n  // Determine overall loading state\n  const isLoading = loading || loadingFmv || loadingActive || loadingMarketAnalysis;\n  const fmvValue = fmv?.market_value || fmv?.expected_high;\n\n  return (\n    <section className=\"analysis-dashboard\">\n      <div className=\"analysis-dashboard-header\">\n        <h2 className=\"analysis-dashboard-title\">\n          <span className=\"analysis-icon\">üìä</span>\n          Market Analysis\n        </h2>\n        <p className=\"analysis-dashboard-subtitle\">\n          Deep insights into market conditions and pricing\n        </p>\n      </div>\n\n      {/* Indicator Cards Grid */}\n      <div className=\"analysis-indicators-grid\">\n        <MarketPressureCard\n          pressure={marketMetrics?.pressure}\n          fmv={fmvValue}\n          loading={isLoading}\n        />\n        <MarketConfidenceCard\n          confidence={marketMetrics?.confidence}\n          soldCount={soldListings?.length || 0}\n          loading={isLoading}\n        />\n        <LiquidityScoreCard\n          liquidity={marketMetrics?.liquidity}\n          soldCount={soldListings?.length || 0}\n          activeCount={activeListings?.length || 0}\n          loading={isLoading}\n        />\n      </div>\n\n      {/* Market Assessment and Pricing side by side */}\n      <div className=\"analysis-details-grid\">\n        <MarketAssessment\n          tier={marketTier}\n          advice={marketAdvice}\n          marketMessage={marketMessage}\n          loading={isLoading}\n        />\n        <PricingRecommendations\n          recommendations={pricingRecommendations}\n          fmv={fmvValue}\n          loading={isLoading}\n        />\n      </div>\n    </section>\n  );\n}\n\nexport default AnalysisDashboard;\n","import { SearchForm, SoldListingsTable, ActiveListingsTable, StatsGrid, FMVDisplay } from '../components/search';\nimport { BeeswarmChart, VolumeProfileChart } from '../components/charts';\nimport { AnalysisDashboard } from '../components/analysis';\nimport useSearchStore from '../stores/searchStore';\n\n/**\n * Home Page - Comps & Analysis (main search page)\n * Full search interface with sold listings, active listings, FMV calculations,\n * and comprehensive market analysis dashboard.\n */\nfunction HomePage() {\n  const { loading, error, hasResults, clearError } = useSearchStore(state => ({\n    loading: state.loading,\n    error: state.error,\n    hasResults: state.hasResults(),\n    clearError: state.clearError\n  }));\n\n  return (\n    <div className=\"home-page\">\n      <section className=\"search-section\">\n        <SearchForm />\n      </section>\n      \n      {error && (\n        <div className=\"error-banner\">\n          <span>{error}</span>\n          <button onClick={clearError}>Dismiss</button>\n        </div>\n      )}\n      \n      {hasResults && (\n        <>\n          <section className=\"stats-section\">\n            <StatsGrid />\n            <FMVDisplay />\n          </section>\n          \n          <section className=\"charts-section\">\n            <div className=\"chart-container\">\n              <h3>Price Distribution</h3>\n              <BeeswarmChart />\n            </div>\n            <div className=\"chart-container\">\n              <h3>Volume Profile</h3>\n              <VolumeProfileChart />\n            </div>\n          </section>\n          \n          {/* Market Analysis Dashboard - Phase 5 */}\n          <AnalysisDashboard />\n          \n          <section className=\"results-section\">\n            <div className=\"results-tables\">\n              <div className=\"sold-listings-section\">\n                <h3>Sold Listings (Comps)</h3>\n                <SoldListingsTable />\n              </div>\n              \n              <div className=\"active-listings-section\">\n                <h3>Active Listings</h3>\n                <ActiveListingsTable />\n              </div>\n            </div>\n          </section>\n        </>\n      )}\n      \n      {!hasResults && !loading && (\n        <div className=\"search-placeholder\">\n          <h2>Search for Sports Cards</h2>\n          <p>Enter a card name to find sold comps and active listings</p>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default HomePage;\n"],"names":["buildSearchQuery","query","filters","excludeLots","ungradedOnly","baseOnly","allExcludedPhrases","lotExclusions","rawOnlyExclusions","baseOnlyExclusions","finalQuery","formatMoney","amount","getItemPrice","item","filterOutliers","prices","sorted","a","b","n","q1Index","q3Index","q1","q3","iqr","lowerBound","upperBound","price","escapeHtml","text","div","calculateStdDev","values","avg","sum","val","avgSquareDiff","value","isMobileDevice","isIOSDevice","calculateMarketPressure","activeListings","fmv","filteredPrices","mid","medianAsking","pressure","calculateMarketConfidence","soldListings","pricesToUse","mean","p","stdDev","coefficientOfVariation","confidence","calculateLiquidityScore","soldCount","activeCount","ratio","score","band","getMetricBand","metricType","getMarketPressureBand","getMarketConfidenceBand","getLiquidityBand","getPricingRecommendations","liquidity","quickDiscount","patientPremium","quickSale","patientSale","formatToNinetyNine","ceil","determineMarketTier","metrics","generatePersonaAdvice","tier","advice","getAuthHeaders","session","supabase","e","useSearchStore","create","set","get","state","filterName","show","fullQuery","authHeaders","compsParams","compsResponse","errorText","_a","_c","_b","compsData","_d","_e","fmvResponse","fmvData","activeParams","activeResponse","activeData","_f","activeError","error","showAllActive","filtered","hasBuyItNow","marketMetrics","fmvValue","pricing","marketTier","response","messageData","SearchForm","className","setQuery","toggleFilter","search","clearSearch","loading","handleSubmit","useCallback","handleKeyDown","handleQueryChange","jsxs","jsx","Input","Button","PropTypes","SoldListingsTable","loadingComps","sortColumn","setSortColumn","useState","sortDirection","setSortDirection","selectedRow","setSelectedRow","handleSort","column","prev","sortedListings","useMemo","comparison","getSortIndicator","handleRowClick","itemId","getLinkUrl","getLinkTarget","ActiveListingsTable","loadingActive","getFilteredActiveListings","showAll","setShowAll","marketValue","filteredListings","calculateDiscount","formatDiscount","discount","sign","colorClass","getBuyingType","option","discountText","StatsGrid","stats","FMVDisplay","calculateBins","numBins","minPrice","maxPrice","bins","binWidth","binIndex","beeswarmLayout","xScale","centerY","radius","maxYOffset","points","placedPoints","point","y","collided","attempts","yOffset","placed","dx","dy","distance","minDistance","direction","roundedRect","ctx","x","width","height","drawTooltip","bgColor","textColor","tooltipWidth","tooltipHeight","tooltipX","tooltipY","DEFAULT_MARGINS","CHART_COLORS","BeeswarmChart","canvasRef","useRef","containerRef","crosshairX","setCrosshairX","dimensions","setDimensions","useEffect","resizeObserver","entries","entry","initialWidth","drawChart","canvas","margin","innerWidth","innerHeight","validPrices","priceRange","expectLow","expectHigh","x1","x2","gradient","lineGradient","fmvX","legendY","legendText","textWidth","rectWidth","spacing","totalLegendWidth","legendX","legendGradient","relativeX","handleInteraction","clientX","rect","marginLeft","marginRight","handleMouseMove","handleTouchMove","handleMouseLeave","handleClick","VolumeProfileChart","defaultBins","setNumBins","soldPrices","activePrices","allPrices","soldBins","activeBins","maxCount","yTicks","i","barAreaWidth","barWidth","barOffset","barHeight","offsetX","adjustBins","delta","newValue","resetBins","isMobile","MarketIndicatorCard","title","unit","min","max","subtitle","infoContent","showInfo","setShowInfo","progressPercent","displayValue","MarketPressureCard","MarketConfidenceCard","LiquidityScoreCard","ratioDisplay","MarketAssessment","marketMessage","rec","index","PricingRecommendations","recommendations","target","range","targetPosition","AnalysisDashboard","marketAdvice","pricingRecommendations","loadingMarketAnalysis","loadingFmv","calculateMarketMetrics","fetchMarketMessage","hasResults","isLoading","HomePage","clearError","Fragment"],"mappings":"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"}